parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function wd(a){return a&&a.__esModule?{d:a.default}:{d:a}}var hc={};var aa={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};var nb={};var ic={};var ob={};var Ya=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();var xd={PROPERTYCHANGE:"propertychange"};var Hb={};var jc={};var nf=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function of(){return!0}function pb(){}function pf($){var r,n,e,t=!1;return function(){var s=Array.prototype.slice.call(arguments);return t&&this===e&&Ib(s,n)||(t=!0,e=this,n=s,r=$.apply(this,arguments)),r}}function qf(r,e,n){for(var t,$,u=n||Za,o=0,c=r.length,i=!1;o<c;)($=+u(r[t=o+(c-o>>1)],e))<0?o=t+1:(c=t,i=!$);return i?o:~o}function Za(r,e){return r>e?1:r<e?-1:0}function rf(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function oa(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,$=0;$<t;$++)r[r.length]=n[$]}function Ib(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}var Jb="function"==typeof Object.assign?Object.assign:function(e,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,o=arguments.length;n<o;++n){var $=arguments[n];if(null!=$)for(var K in $)$.hasOwnProperty(K)&&(t[K]=$[K])}return t};function kc(e){for(var r in e)delete e[r]}var yd="function"==typeof Object.values?Object.values:function(e){var r=[];for(var t in e)r.push(e[t]);return r};function qb(e){var r;for(r in e)return!1;return!r}var sf=jc&&jc.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),rb=function(e){function t(t){var n=e.call(this)||this;return n.eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return sf(t,e),t.prototype.addEventListener=function(e,t){if(e&&t){var n=this.listeners_||(this.listeners_={}),i=n[e]||(n[e]=[]);-1===i.indexOf(t)&&i.push(t)}},t.prototype.dispatchEvent=function(e){var t="string"==typeof e?new Ya(e):e,n=t.type;t.target||(t.target=this.eventTarget_||this);var i,r=this.listeners_&&this.listeners_[n];if(r){var s=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});n in s||(s[n]=0,o[n]=0),++s[n];for(var p=0,a=r.length;p<a;++p)if(!1===(i="handleEvent"in r[p]?r[p].handleEvent(t):r[p].call(this,t))||t.propagationStopped){i=!1;break}if(--s[n],0===s[n]){var l=o[n];for(delete o[n];l--;)this.removeEventListener(n,pb);delete s[n]}return i}},t.prototype.disposeInternal=function(){this.listeners_&&kc(this.listeners_)},t.prototype.getListeners=function(e){return this.listeners_&&this.listeners_[e]||void 0},t.prototype.hasListener=function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)},t.prototype.removeEventListener=function(e,t){var n=this.listeners_&&this.listeners_[e];if(n){var i=n.indexOf(t);-1!==i&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[i]=pb,++this.pendingRemovals_[e]):(n.splice(i,1),0===n.length&&delete this.listeners_[e]))}},t}(nf);jc.default=rb;var ka={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function ta(e,t,n,$,r){if($&&$!==e&&(n=n.bind($)),r){var i=n;n=function(){e.removeEventListener(t,n),i.apply(this,arguments)}}var s={target:e,type:t,listener:n};return e.addEventListener(t,n),s}function Kb(e,t,n,$){return ta(e,t,n,$,!0)}function ua(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),kc(e))}var tf=Hb&&Hb.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),lc=function(r){function e(){var e=r.call(this)||this;return e.revision_=0,e}return tf(e,r),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(ka.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(r,e){if(Array.isArray(r)){for(var t=r.length,n=new Array(t),o=0;o<t;++o)n[o]=ta(this,r[o],e);return n}return ta(this,r,e)},e.prototype.once=function(r,e){var t;if(Array.isArray(r)){var n=r.length;t=new Array(n);for(var o=0;o<n;++o)t[o]=Kb(this,r[o],e)}else t=Kb(this,r,e);return e.ol_key=t,t},e.prototype.un=function(r,e){var t=e.ol_key;if(t)zd(t);else if(Array.isArray(r))for(var n=0,o=r.length;n<o;++n)this.removeEventListener(r[n],e);else this.removeEventListener(r,e)},e}(rb);function zd(r){if(Array.isArray(r))for(var e=0,t=r.length;e<t;++e)ua(r[e]);else ua(r)}Hb.unByKey=zd,Hb.default=lc;function ca(){return function(){throw new Error("Unimplemented abstract method.")}()}var uf=0;function ia(t){return t.ol_uid||(t.ol_uid=String(++uf))}var mc="6.4.1";var Ad=ob&&ob.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nc=function(e){function t(t,r,n){var $=e.call(this,t)||this;return $.key=r,$.oldValue=n,$}return Ad(t,e),t}(Ya);ob.ObjectEvent=nc;var Ca=function(e){function t(t){var r=e.call(this)||this;return ia(r),r.values_=null,void 0!==t&&r.setProperties(t),r}return Ad(t,e),t.prototype.get=function(e){var t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&Jb({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(e,t){var r;r=$a(e),this.dispatchEvent(new nc(r,e,t)),r=xd.PROPERTYCHANGE,this.dispatchEvent(new nc(r,e,t))},t.prototype.set=function(e,t,r){var n=this.values_||(this.values_={});if(r)n[e]=t;else{var $=n[e];n[e]=t,$!==t&&this.notify(e,$)}},t.prototype.setProperties=function(e,t){for(var r in e)this.set(r,e[r],t)},t.prototype.unset=function(e,t){if(this.values_&&e in this.values_){var r=this.values_[e];delete this.values_[e],qb(this.values_)&&(this.values_=null),t||this.notify(e,r)}},t}(lc),oc={};function $a(e){return oc.hasOwnProperty(e)?oc[e]:oc[e]="change:"+e}ob.getChangeEventType=$a,ob.default=Ca;var La={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},sb={};sb[La.DEGREES]=2*Math.PI*6370997/360,sb[La.FEET]=.3048,sb[La.METERS]=1,sb[La.USFEET]=1200/3937;function la(r,$){if(!r)throw new qc($)}var pc={};var vf=pc&&pc.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),qc=function(t){function r(r){var e=this,o="Assertion failed. See https://openlayers.org/en/"+("latest"===mc?mc:"v"+mc.split("-")[0])+"/doc/errors/#"+r+" for details.";return(e=t.call(this,o)||this).code=r,e.name="AssertionError",e.message=o,e}return vf(r,t),r}(Error);pc.default=qc;var a=new Array(6);function Da(){return[1,0,0,1,0,0]}function wf($,t,r,e,s,o,u){return $[0]=t,$[1]=r,$[2]=e,$[3]=s,$[4]=o,$[5]=u,$}function xf($,t){return $[0]=t[0],$[1]=t[1],$[2]=t[2],$[3]=t[3],$[4]=t[4],$[5]=t[5],$}function ha($,t){var r=t[0],e=t[1];return t[0]=$[0]*r+$[2]*e+$[4],t[1]=$[1]*r+$[3]*e+$[5],t}function yf($,t,r){return wf($,t,0,0,r,0,0)}function _a($,t,r,e,s,o,u,p){var n=Math.sin(o),Z=Math.cos(o);return $[0]=e*Z,$[1]=s*n,$[2]=-e*n,$[3]=s*Z,$[4]=u*e*Z-p*e*n+t,$[5]=u*s*n+p*s*Z+r,$}function zf($,t){var r=Af(t);la(0!==r,32);var e=t[0],s=t[1],o=t[2],u=t[3],p=t[4],n=t[5];return $[0]=u/r,$[1]=-s/r,$[2]=-o/r,$[3]=e/r,$[4]=(o*n-u*p)/r,$[5]=-(e*n-s*p)/r,$}function Af($){return $[0]*$[3]-$[1]*$[2]}function Bf($){return"matrix("+$.join(", ")+")"}function Cf(t,e,$){return Na(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),$)}function rc(t,e,$){return $?($[0]=t[0]-e,$[1]=t[1]-e,$[2]=t[2]+e,$[3]=t[3]+e,$):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Df(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function ab(t,e,$){var r,a;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(a=$<t[1]?t[1]-$:t[3]<$?$-t[3]:0)*a}function Ma(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Bd(t,e,$){return t[0]<=e&&e<=t[2]&&t[1]<=$&&$<=t[3]}function sc(t,e){var $=t[0],r=t[1],a=t[2],o=t[3],n=e[0],p=e[1],h=ja.UNKNOWN;return n<$?h|=ja.LEFT:n>a&&(h|=ja.RIGHT),p<r?h|=ja.BELOW:p>o&&(h|=ja.ABOVE),h===ja.UNKNOWN&&(h=ja.INTERSECTING),h}function bb(){return[1/0,1/0,-1/0,-1/0]}function Na(t,e,$,r,a){return a?(a[0]=t,a[1]=e,a[2]=$,a[3]=r,a):[t,e,$,r]}function Cd(t){return Na(1/0,1/0,-1/0,-1/0,t)}function Ef(t,e){var $=t[0],r=t[1];return Na($,r,$,r,e)}function Dd(t,e,$,r,a){return Fd(Cd(a),t,e,$,r)}function Ed(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Ff(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Fd(t,e,$,r,a){for(;$<r;$+=a)Gf(t,e[$],e[$+1]);return t}function Gf(t,e,$){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],$),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],$)}function Gd(t,e){var $;return($=e(tc(t)))?$:($=e(uc(t)))?$:($=e(xc(t)))?$:($=e(wc(t)))||!1}function tc(t){return[t[0],t[1]]}function uc(t){return[t[2],t[1]]}function vc(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Lb(t){return t[3]-t[1]}function wc(t){return[t[0],t[3]]}function xc(t){return[t[2],t[3]]}function Ea(t){return t[2]-t[0]}function ma(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Hf(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function If(t,e,$){var r=!1,a=sc(t,e),o=sc(t,$);if(a===ja.INTERSECTING||o===ja.INTERSECTING)r=!0;else{var n=t[0],p=t[1],h=t[2],i=t[3],x=e[0],S=e[1],s=$[0],c=$[1],u=(c-S)/(s-x),d=void 0,g=void 0;o&ja.ABOVE&&!(a&ja.ABOVE)&&(r=(d=s-(c-i)/u)>=n&&d<=h),r||!(o&ja.RIGHT)||a&ja.RIGHT||(r=(g=c-(s-h)*u)>=p&&g<=i),r||!(o&ja.BELOW)||a&ja.BELOW||(r=(d=s-(c-p)/u)>=n&&d<=h),r||!(o&ja.LEFT)||a&ja.LEFT||(r=(g=c-(s-n)*u)>=p&&g<=i)}return r}function Jf(t,e,$,r){var a=[];if(r>1)for(var o=t[2]-t[0],n=t[3]-t[1],p=0;p<r;++p)a.push(t[0]+o*p/r,t[1],t[2],t[1]+n*p/r,t[2]-o*p/r,t[3],t[0],t[3]-n*p/r);else a=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(a,a,2);for(var h=[],i=[],x=(p=0,a.length);p<x;p+=2)h.push(a[p]),i.push(a[p+1]);return Cf(h,i,$)}function Kf(t,e){var $=e.getExtent(),r=vc(t);if(e.canWrapX()&&(r[0]<$[0]||r[0]>=$[2])){var a=Ea($),o=Math.floor((r[0]-$[0])/a)*a;t[0]-=o,t[2]-=o}return t}var ja={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Hd(r,o,$){var t;if(void 0!==o){for(var e=0,s=r.length;e<s;++e)o[e]=r[e];t=o}else t=r.slice();return t}function Lf(r,o,$){if(void 0!==o&&r!==o){for(var t=0,e=r.length;t<e;++t)o[t]=r[t];r=o}return r}function Mf(r){Vf(r.getCode(),r),Nb(r,r,Hd)}function Nf(r){r.forEach(Mf)}function Mb(r){return"string"==typeof r?Uf(r):r||null}function Id(r){Nf(r),r.forEach(function(o){r.forEach(function(r){o!==r&&Nb(o,r,Hd)})})}function Of(r,o,$,t){r.forEach(function(r){o.forEach(function(o){Nb(r,o,$),Nb(o,r,t)})})}function Jd(r,o){var $=r.getCode(),t=o.getCode(),e=Wf($,t);return e||(e=Lf),e}function yc(r,o){return Jd(Mb(r),Mb(o))}function Kd(r,o,$,t){var e=yc(o,$);return Jf(r,e,void 0,t)}var b=arguments[0];var Ld=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||sb[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();var va={};function tb(r,e,t){return Math.min(Math.max(r,e),t)}var Pf="cosh"in Math?Math.cosh:function(r){var e=Math.exp(r);return(e+1/e)/2};var c="log2"in Math?Math.log2:function(r){return Math.log(r)*Math.LOG2E};function Qf(r,e,t,$,o,p){var a=o-t,n=p-$;if(0!==a||0!==n){var d=((r-t)*a+(e-$)*n)/(a*a+n*n);d>1?(t=o,$=p):d>0&&(t+=a*d,$+=n*d)}return Oa(r,e,t,$)}function Oa(r,e,t,$){var o=t-r,p=$-e;return o*o+p*p}function Md(r){return 180*r/Math.PI}function Fa(r){return r*Math.PI/180}function Rf(r,e){var t=r%e;return t*e<0?t+e:t}function ub(r,e,t){return r+t*(e-r)}var Sf=va&&va.__extends||function(){var $=function(r,t){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,r){$.__proto__=r}||function($,r){for(var t in r)r.hasOwnProperty(t)&&($[t]=r[t])})(r,t)};return function(r,t){function o(){this.constructor=r}$(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),vb=6378137;va.RADIUS=vb;var Pa=Math.PI*vb;va.HALF_SIZE=Pa;var Nd=[-Pa,-Pa,Pa,Pa];va.EXTENT=Nd;var Od=[-180,-85,180,85];va.WORLD_EXTENT=Od;var Qa=function($){function r(r){return $.call(this,{code:r,units:La.METERS,extent:Nd,global:!0,worldExtent:Od,getPointResolution:function($,r){return $/Pf(r[1]/vb)}})||this}return Sf(r,$),r}(Ld),zc=[new Qa("EPSG:3857"),new Qa("EPSG:102100"),new Qa("EPSG:102113"),new Qa("EPSG:900913"),new Qa("urn:ogc:def:crs:EPSG:6.18:3:3857"),new Qa("urn:ogc:def:crs:EPSG::3857"),new Qa("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Pd($,r,t){var o=$.length,e=t>1?t:2,a=r;void 0===a&&(a=e>2?$.slice():new Array(o));for(var n=Pa,G=0;G<o;G+=e){a[G]=n*$[G]/180;var M=vb*Math.log(Math.tan(Math.PI*(+$[G+1]+90)/360));M>n?M=n:M<-n&&(M=-n),a[G+1]=M}return a}function Qd($,r,t){var o=$.length,e=t>1?t:2,a=r;void 0===a&&(a=e>2?$.slice():new Array(o));for(var n=0;n<o;n+=e)a[n]=180*$[n]/Pa,a[n+1]=360*Math.atan(Math.exp($[n+1]/vb))/Math.PI-90;return a}va.PROJECTIONS=zc,va.fromEPSG4326=Pd,va.toEPSG4326=Qd;var cb={};var Tf=cb&&cb.__extends||function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(n,r)};return function(n,r){function $(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):($.prototype=r.prototype,new $)}}(),Rd=6378137;cb.RADIUS=Rd;var Ac=[-180,-90,180,90];cb.EXTENT=Ac;var Sd=Math.PI*Rd/180;cb.METERS_PER_UNIT=Sd;var Ga=function(t){function n(n,r){return t.call(this,{code:n,units:La.DEGREES,extent:Ac,axisOrientation:r,global:!0,metersPerUnit:Sd,worldExtent:Ac})||this}return Tf(n,t),n}(Ld),Bc=[new Ga("CRS:84"),new Ga("EPSG:4326","neu"),new Ga("urn:ogc:def:crs:EPSG::4326","neu"),new Ga("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Ga("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ga("urn:ogc:def:crs:OGC:2:84"),new Ga("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ga("urn:x-ogc:def:crs:EPSG:4326","neu")];cb.PROJECTIONS=Bc;var Td={};function Uf($){return Td[$]||null}function Vf($,e){Td[$]=e}var db={};function Nb($,t,r){var e=$.getCode(),o=t.getCode();e in db||(db[e]={}),db[e][o]=r}function Wf($,t){var r;return $ in db&&t in db[$]&&(r=db[$][t]),r}var Ob=6371008.8;function Xf(e,t,r){var $=r||Ob,v=Fa(e[1]),a=Fa(t[1]),o=(a-v)/2,n=Fa(t[0]-e[0])/2,R=Math.sin(o)*Math.sin(o)+Math.sin(n)*Math.sin(n)*Math.cos(v)*Math.cos(a);return 2*$*Math.atan2(Math.sqrt(R),Math.sqrt(1-R))}function Cc(e,t){for(var r=0,$=0,v=e.length;$<v-1;++$)r+=Xf(e[$],e[$+1],t);return r}function Yf(e,t){var r=t||{},$=r.radius||Ob,v=r.projection||"EPSG:3857",a=e.getType();a!==aa.GEOMETRY_COLLECTION&&(e=e.clone().transform(v,"EPSG:4326"));var o,n,R,p,s,i,m=0;switch(a){case aa.POINT:case aa.MULTI_POINT:break;case aa.LINE_STRING:case aa.LINEAR_RING:m=Cc(o=e.getCoordinates(),$);break;case aa.MULTI_LINE_STRING:case aa.POLYGON:for(R=0,p=(o=e.getCoordinates()).length;R<p;++R)m+=Cc(o[R],$);break;case aa.MULTI_POLYGON:for(R=0,p=(o=e.getCoordinates()).length;R<p;++R)for(s=0,i=(n=o[R]).length;s<i;++s)m+=Cc(n[s],$);break;case aa.GEOMETRY_COLLECTION:var g=e.getGeometries();for(R=0,p=g.length;R<p;++R)m+=Yf(g[R],t);break;default:throw new Error("Unsupported geometry type: "+a);}return m}function Pb(e,t){for(var r=0,$=e.length,v=e[$-1][0],a=e[$-1][1],o=0;o<$;o++){var n=e[o][0],R=e[o][1];r+=Fa(n-v)*(2+Math.sin(Fa(a))+Math.sin(Fa(R))),v=n,a=R}return r*t*t/2}function Zf(e,t){var r=t||{},$=r.radius||Ob,v=r.projection||"EPSG:3857",a=e.getType();a!==aa.GEOMETRY_COLLECTION&&(e=e.clone().transform(v,"EPSG:4326"));var o,n,R,p,s,i,m=0;switch(a){case aa.POINT:case aa.MULTI_POINT:case aa.LINE_STRING:case aa.MULTI_LINE_STRING:case aa.LINEAR_RING:break;case aa.POLYGON:for(o=e.getCoordinates(),m=Math.abs(Pb(o[0],$)),R=1,p=o.length;R<p;++R)m-=Math.abs(Pb(o[R],$));break;case aa.MULTI_POLYGON:for(R=0,p=(o=e.getCoordinates()).length;R<p;++R)for(n=o[R],m+=Math.abs(Pb(n[0],$)),s=1,i=n.length;s<i;++s)m-=Math.abs(Pb(n[s],$));break;case aa.GEOMETRY_COLLECTION:var g=e.getGeometries();for(R=0,p=g.length;R<p;++R)m+=Zf(g[R],t);break;default:throw new Error("Unsupported geometry type: "+a);}return m}function $f(e,t,r,$){var v=$||Ob,a=Fa(e[1]),o=Fa(e[0]),n=t/v,R=Math.asin(Math.sin(a)*Math.cos(n)+Math.cos(a)*Math.sin(n)*Math.cos(r)),p=o+Math.atan2(Math.sin(r)*Math.sin(n)*Math.cos(a),Math.cos(n)-Math.sin(a)*Math.sin(R));return[Md(p),Md(R)]}function _f(t,e){var r=Ea(e.getExtent()),$=ag(t,e,r);return $&&(t[0]-=$*r),t}function ag(t,e,r){var $=e.getExtent(),o=0;if(e.canWrapX()&&(t[0]<$[0]||t[0]>$[2])){var u=r||Ea($);o=Math.floor((t[0]-$[0])/u)}return o}var wb=null;function bg(){return wb}function Ud(r,o){return wb?Kd(r,o,wb):r}function cg(r,o){return wb?Kd(r,wb,o):r}function dg(){Id(zc),Id(Bc),Of(Bc,zc,Pd,Qd)}dg();function Ra(r,t,e,$,o,a){for(var n=a||[],w=0,i=t;i<e;i+=$){var s=r[i],f=r[i+1];n[w++]=o[0]*s+o[2]*f+o[4],n[w++]=o[1]*s+o[3]*f+o[5]}return a&&n.length!=w&&(n.length=w),n}function Dc(r,t,e,$,o,a,n){for(var w=n||[],i=Math.cos(o),s=Math.sin(o),f=a[0],l=a[1],p=0,x=t;x<e;x+=$){var G=r[x]-f,v=r[x+1]-l;w[p++]=f+G*i-v*s,w[p++]=l+G*s+v*i;for(var h=x+2;h<x+$;++h)w[p++]=r[h]}return n&&w.length!=p&&(w.length=p),w}function eg(r,t,e,$,o,a,n,w){for(var i=w||[],s=n[0],f=n[1],l=0,p=t;p<e;p+=$){var x=r[p]-s,G=r[p+1]-f;i[l++]=s+o*x,i[l++]=f+a*G;for(var v=p+2;v<p+$;++v)i[l++]=r[v]}return w&&i.length!=l&&(i.length=l),i}function Vd(r,t,e,$,o,a,n){for(var w=n||[],i=0,s=t;s<e;s+=$){w[i++]=r[s]+o,w[i++]=r[s+1]+a;for(var f=s+2;f<s+$;++f)w[i++]=r[f]}return n&&w.length!=i&&(w.length=i),w}var fg=ic&&ic.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),Wd=Da(),Xd=function(t){function r(){var r=t.call(this)||this;return r.extent_=bb(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=pf(function(t,r,e){if(!e)return this.getSimplifiedGeometry(r);var o=this.clone();return o.applyTransform(e),o.getSimplifiedGeometry(r)}),r}return fg(r,t),r.prototype.simplifyTransformed=function(t,r){return this.simplifyTransformedInternal(this.getRevision(),t,r)},r.prototype.clone=function(){return ca()},r.prototype.closestPointXY=function(t,r,e,o){return ca()},r.prototype.containsXY=function(t,r){var e=this.getClosestPoint([t,r]);return e[0]===t&&e[1]===r},r.prototype.getClosestPoint=function(t,r){var e=r||[NaN,NaN];return this.closestPointXY(t[0],t[1],e,1/0),e},r.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},r.prototype.computeExtent=function(t){return ca()},r.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var r=this.computeExtent(this.extent_);(isNaN(r[0])||isNaN(r[1]))&&Cd(r),this.extentRevision_=this.getRevision()}return Hf(this.extent_,t)},r.prototype.rotate=function(t,r){ca()},r.prototype.scale=function(t,r,e){ca()},r.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},r.prototype.getSimplifiedGeometry=function(t){return ca()},r.prototype.getType=function(){return ca()},r.prototype.applyTransform=function(t){ca()},r.prototype.intersectsExtent=function(t){return ca()},r.prototype.translate=function(t,r){ca()},r.prototype.transform=function(t,r){var e=Mb(t),o=e.getUnits()==La.TILE_PIXELS?function(t,o,n){var i=e.getExtent(),$=e.getWorldExtent(),p=Lb($)/Lb(i);return _a(Wd,$[0],$[3],p,-p,0,0,0),Ra(t,0,t.length,n,Wd,o),yc(e,r)(t,o,n)}:yc(e,r);return this.applyTransform(o),this},r}(Ca);ic.default=Xd;var ga={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var gg=nb&&nb.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),wa=function(t){function e(){var e=t.call(this)||this;return e.layout=ga.XY,e.stride=2,e.flatCoordinates=null,e}return gg(e,t),e.prototype.computeExtent=function(t){return Dd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return ca()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Ec(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){ca()},e.prototype.setLayout=function(t,e,r){var o;if(t)o=Ec(t);else{for(var i=0;i<r;++i){if(0===e.length)return this.layout=ga.XY,void(this.stride=2);e=e[0]}t=hg(o=e.length)}this.layout=t,this.stride=o},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var o=this.getStride();Dc(r,0,r.length,o,t,e,r),this.changed()}},e.prototype.scale=function(t,e,r){var o=e;void 0===o&&(o=t);var i=r;i||(i=vc(this.getExtent()));var n=this.getFlatCoordinates();if(n){var a=this.getStride();eg(n,0,n.length,a,t,o,i,n),this.changed()}},e.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var o=this.getStride();Vd(r,0,r.length,o,t,e,r),this.changed()}},e}(Xd);function hg(t){var e;return 2==t?e=ga.XY:3==t?e=ga.XYZ:4==t&&(e=ga.XYZM),e}function Ec(t){var e;return t==ga.XY?e=2:t==ga.XYZ||t==ga.XYM?e=3:t==ga.XYZM&&(e=4),e}function Yd(t,e,r){var o=t.getFlatCoordinates();if(o){var i=t.getStride();return Ra(o,0,o.length,i,e,r)}return null}nb.getStrideForLayout=Ec,nb.transformGeom2D=Yd,nb.default=wa;function Zd(e,r,t,o){for(var a=0,$=t.length;a<$;++a)e[r++]=t[a];return r}function Qb(e,r,t,o){for(var a=0,$=t.length;a<$;++a)for(var n=t[a],d=0;d<o;++d)e[r++]=n[d];return r}function Fc(e,r,t,o,a){for(var $=a||[],n=0,d=0,l=t.length;d<l;++d){var f=Qb(e,r,t[d],o);$[n++]=f,r=f}return $.length=n,$}function ig(e,r,t,o,a){for(var $=a||[],n=0,d=0,l=t.length;d<l;++d){var f=Fc(e,r,t[d],o,$[n]);$[n++]=f,r=f[f.length-1]}return $.length=n,$}var jg=hc&&hc.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),$d=function(t){function e(e,r,o){var i=t.call(this)||this;if(void 0!==o&&void 0===r)i.setFlatCoordinates(o,e);else{var s=r||0;i.setCenterAndRadius(e,s,o)}return i}return jg(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,r,o){var i=this.flatCoordinates,s=t-i[0],n=e-i[1],a=s*s+n*n;if(a<o){if(0===a)for(var u=0;u<this.stride;++u)r[u]=i[u];else{var p=this.getRadius()/Math.sqrt(a);r[0]=i[0]+p*s,r[1]=i[1]+p*n;for(u=2;u<this.stride;++u)r[u]=i[u]}return r.length=this.stride,a}return o},e.prototype.containsXY=function(t,e){var r=this.flatCoordinates,o=t-r[0],i=e-r[1];return o*o+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return Na(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return aa.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(ma(t,e)){var r=this.getCenter();return t[0]<=r[0]&&t[2]>=r[0]||t[1]<=r[1]&&t[3]>=r[1]||Gd(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],o=t.slice();o[e]=o[0]+r;for(var i=1;i<e;++i)o[e+i]=t[i];this.setFlatCoordinates(this.layout,o),this.changed()},e.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,i=Zd(o,0,t,this.stride);o[i++]=o[0]+e;for(var s=1,n=this.stride;s<n;++s)o[i++]=o[s];o.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter(Dc(r,0,r.length,o,t,e,r)),this.changed()},e.prototype.translate=function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter(Vd(r,0,r.length,o,t,e,r)),this.changed()},e}(wa);$d.prototype.transform,hc.default=$d;var Rb={};var kg=Rb&&Rb.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lg=function(e){function t(t){var r=e.call(this)||this;if(r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addEventListener($a(r.geometryName_),r.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){var n=t;r.setGeometry(n)}else{var o=t;r.setProperties(o)}return r}return kg(t,e),t.prototype.clone=function(){var e=new t(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&e.setGeometry(r.clone());var n=this.getStyle();return n&&e.setStyle(n),e},t.prototype.getGeometry=function(){return this.get(this.geometryName_)},t.prototype.getId=function(){return this.id_},t.prototype.getGeometryName=function(){return this.geometryName_},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.handleGeometryChange_=function(){this.changed()},t.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(ua(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=ta(e,ka.CHANGE,this.handleGeometryChange_,this)),this.changed()},t.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},t.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?_d(e):void 0,this.changed()},t.prototype.setId=function(e){this.id_=e,this.changed()},t.prototype.setGeometryName=function(e){this.removeEventListener($a(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=e,this.addEventListener($a(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},t}(Ca);function _d(e){return"function"==typeof e?e:(Array.isArray(e)?t=e:(la("function"==typeof e.getZIndex,41),t=[e]),function(){return t});var t}Rb.createStyleFunction=_d,Rb.default=lg;var ae={ACTIVE:"active"};var Gc={};function be(t,a,r,e,$,s,o){var n,i=t[a],l=t[a+1],u=t[r]-i,x=t[r+1]-l;if(0===u&&0===x)n=a;else{var z=(($-i)*u+(s-l)*x)/(u*u+x*x);if(z>1)n=r;else{if(z>0){for(var p=0;p<e;++p)o[p]=ub(t[a+p],t[r+p],z);return void(o.length=e)}n=a}}for(p=0;p<e;++p)o[p]=t[n+p];o.length=e}function Hc(t,a,r,e,$){var s=t[a],o=t[a+1];for(a+=e;a<r;a+=e){var n=t[a],i=t[a+1],l=Oa(s,o,n,i);l>$&&($=l),s=n,o=i}return $}function Ic(t,a,r,e,$){for(var s=0,o=r.length;s<o;++s){var n=r[s];$=Hc(t,a,n,e,$),a=n}return $}function mg(t,a,r,e,$){for(var s=0,o=r.length;s<o;++s){var n=r[s];$=Ic(t,a,n,e,$),a=n[n.length-1]}return $}function Jc(t,a,r,e,$,s,o,n,i,l,u){if(a==r)return l;var x,z;if(0===$){if((z=Oa(o,n,t[a],t[a+1]))<l){for(x=0;x<e;++x)i[x]=t[a+x];return i.length=e,z}return l}for(var p=u||[NaN,NaN],f=a+e;f<r;)if(be(t,f-e,f,e,o,n,p),(z=Oa(o,n,p[0],p[1]))<l){for(l=z,x=0;x<e;++x)i[x]=p[x];i.length=e,f+=e}else f+=e*Math.max((Math.sqrt(z)-Math.sqrt(l))/$|0,1);if(s&&(be(t,r-e,a,e,o,n,p),(z=Oa(o,n,p[0],p[1]))<l)){for(l=z,x=0;x<e;++x)i[x]=p[x];i.length=e}return l}function Kc(t,a,r,e,$,s,o,n,i,l,u){for(var x=u||[NaN,NaN],z=0,p=r.length;z<p;++z){var f=r[z];l=Jc(t,a,f,e,$,s,o,n,i,l,x),a=f}return l}function ng(t,a,r,e,$,s,o,n,i,l,u){for(var x=u||[NaN,NaN],z=0,p=r.length;z<p;++z){var f=r[z];l=Kc(t,a,f,e,$,s,o,n,i,l,x),a=f[f.length-1]}return l}function Lc(r,$,e,t,a,x,o){var n=(e-$)/t;if(n<3){for(;$<e;$+=t)x[o++]=r[$],x[o++]=r[$+1];return o}var u=new Array(n);u[0]=1,u[n-1]=1;for(var p=[$,e-t],y=0;p.length>0;){for(var h=p.pop(),i=p.pop(),s=0,O=r[i],l=r[i+1],c=r[h],f=r[h+1],g=i+t;g<h;g+=t){var d=r[g],v=r[g+1],A=Qf(d,v,O,l,c,f);A>s&&(y=g,s=A)}s>a&&(u[(y-$)/t]=1,i+t<y&&p.push(i,y),y+t<h&&p.push(y,h))}for(g=0;g<n;++g)u[g]&&(x[o++]=r[$+g*t],x[o++]=r[$+g*t+1]);return o}function og(r,$,e,t,a,x,o,n){for(var u=0,p=e.length;u<p;++u){var y=e[u];o=Lc(r,$,y,t,a,x,o),n.push(o),$=y}return o}function Sa(r,$){return $*Math.round(r/$)}function pg(r,$,e,t,a,x,o){if($==e)return o;var n,u,p=Sa(r[$],a),y=Sa(r[$+1],a);$+=t,x[o++]=p,x[o++]=y;do{if(n=Sa(r[$],a),u=Sa(r[$+1],a),($+=t)==e)return x[o++]=n,x[o++]=u,o}while(n==p&&u==y);for(;$<e;){var h=Sa(r[$],a),i=Sa(r[$+1],a);if($+=t,h!=n||i!=u){var s=n-p,O=u-y,l=h-p,c=i-y;s*c==O*l&&(s<0&&l<s||s==l||s>0&&l>s)&&(O<0&&c<O||O==c||O>0&&c>O)?(n=h,u=i):(x[o++]=n,x[o++]=u,p=n,y=u,n=h,u=i)}}return x[o++]=n,x[o++]=u,o}function ce(r,$,e,t,a,x,o,n){for(var u=0,p=e.length;u<p;++u){var y=e[u];o=pg(r,$,y,t,a,x,o),n.push(o),$=y}return o}function qg(r,$,e,t,a,x,o,n){for(var u=0,p=e.length;u<p;++u){var y=e[u],h=[];o=ce(r,$,y,t,a,x,o,h),n.push(h),$=y[y.length-1]}return o}function de(r,$,o,t,e){for(var f,i=[r[$],r[$+1]],a=[];$+t<o;$+=t){if(a[0]=r[$+t],a[1]=r[$+t+1],f=e(i,a))return f;i[0]=a[0],i[1]=a[1]}return!1}function xb(r,t,e,o,n){for(var a=void 0!==n?n:[],i=0,$=t;$<e;$+=o)a[i++]=r.slice($,$+o);return a.length=i,a}function Sb(r,t,e,o,n){for(var a=void 0!==n?n:[],i=0,$=0,l=e.length;$<l;++$){var v=e[$];a[i++]=xb(r,t,v,o,a[i]),t=v}return a.length=i,a}function ee(r,t,e,o,n){for(var a=void 0!==n?n:[],i=0,$=0,l=e.length;$<l;++$){var v=e[$];a[i++]=Sb(r,t,v,o,a[i]),t=v[v.length-1]}return a.length=i,a}function fe(r,n,e,t,i,o,$){var l,a,u=(e-n)/t;if(1===u)l=n;else if(2===u)l=n,a=i;else if(0!==u){for(var p=r[n],f=r[n+1],s=0,q=[0],v=n+t;v<e;v+=t){var B=r[v],W=r[v+1];s+=Math.sqrt((B-p)*(B-p)+(W-f)*(W-f)),q.push(s),p=B,f=W}var c=i*s,g=qf(q,c);g<0?(a=(c-q[-g-2])/(q[-g-1]-q[-g-2]),l=n+(-g-2)*t):l=n+g*t}var x=$>1?$:2,d=o||new Array(x);for(v=0;v<x;++v)d[v]=void 0===l?NaN:void 0===a?r[l+v]:ub(r[l+v],r[l+t+v],a);return d}function Mc(r,n,e,t,i,o){if(e==n)return null;var $;if(i<r[n+t-1])return o?(($=r.slice(n,n+t))[t-1]=i,$):null;if(r[e-1]<i)return o?(($=r.slice(e-t,e))[t-1]=i,$):null;if(i==r[n+t-1])return r.slice(n,n+t);for(var l=n/t,a=e/t;l<a;){var u=l+a>>1;i<r[(u+1)*t-1]?a=u:l=u+1}var p=r[l*t-1];if(i==p)return r.slice((l-1)*t,(l-1)*t+t);var f=(i-p)/(r[(l+1)*t-1]-p);$=[];for(var s=0;s<t-1;++s)$.push(ub(r[(l-1)*t+s],r[l*t+s],f));return $.push(i),$}function rg(r,n,e,t,i,o,$){if($)return Mc(r,n,e[e.length-1],t,i,o);var l;if(i<r[t-1])return o?((l=r.slice(0,t))[t-1]=i,l):null;if(r[r.length-1]<i)return o?((l=r.slice(r.length-t))[t-1]=i,l):null;for(var a=0,u=e.length;a<u;++a){var p=e[a];if(n!=p){if(i<r[n+t-1])return null;if(i<=r[p-1])return Mc(r,n,p,t,i,!1);n=p}}return null}function Tb(r,t,e,n,i){var $=Fd(bb(),r,t,e,n);return!!ma(i,$)&&(!!Ma(i,$)||$[0]>=i[0]&&$[2]<=i[2]||$[1]>=i[1]&&$[3]<=i[3]||de(r,t,e,n,function(r,t){return If(i,r,t)}))}function sg(r,t,e,n,i){for(var $=0,s=e.length;$<s;++$){if(Tb(r,t,e[$],n,i))return!0;t=e[$]}return!1}function tg(r,t,e,n,i){return!!Tb(r,t,e,n,i)||!!Ta(r,t,e,n,i[0],i[1])||!!Ta(r,t,e,n,i[0],i[3])||!!Ta(r,t,e,n,i[2],i[1])||!!Ta(r,t,e,n,i[2],i[3])}function ge(r,t,e,n,i){if(!tg(r,t,e[0],n,i))return!1;if(1===e.length)return!0;for(var $=1,s=e.length;$<s;++$)if(vg(r,e[$-1],e[$],n,i)&&!Tb(r,e[$-1],e[$],n,i))return!1;return!0}function ug(r,t,e,n,i){for(var $=0,s=e.length;$<s;++$){var o=e[$];if(ge(r,t,o,n,i))return!0;t=o[o.length-1]}return!1}function vg(n,r,t,i,e){return!Gd(e,function(e){return!Ta(n,r,t,i,e[0],e[1])})}function Ta(n,r,t,i,e,$){for(var o=0,a=n[t-i],s=n[t-i+1];r<t;r+=i){var l=n[r],g=n[r+1];s<=$?g>$&&(l-a)*($-s)-(e-a)*(g-s)>0&&o++:g<=$&&(l-a)*($-s)-(e-a)*(g-s)<0&&o--,a=l,s=g}return 0!==o}function Nc(n,r,t,i,e,$){if(0===t.length)return!1;if(!Ta(n,r,t[0],i,e,$))return!1;for(var o=1,a=t.length;o<a;++o)if(Ta(n,t[o-1],t[o],i,e,$))return!1;return!0}function wg(n,r,t,i,e,$){if(0===t.length)return!1;for(var o=0,a=t.length;o<a;++o){var s=t[o];if(Nc(n,r,s,i,e,$))return!0;r=s[s.length-1]}return!1}function he(n,t,r,e){for(var $=n[t],i=n[t+1],g=0,s=t+e;s<r;s+=e){var o=n[s],a=n[s+1];g+=Math.sqrt((o-$)*(o-$)+(a-i)*(a-i)),$=o,i=a}return g}var xg=Gc&&Gc.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Oc=function(t){function e(e,i){var o=t.call(this)||this;return o.flatMidpoint_=null,o.flatMidpointRevision_=-1,o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?o.setCoordinates(e,i):o.setFlatCoordinates(i,e),o}return xg(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?oa(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,o){return o<ab(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Hc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Jc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,o))},e.prototype.forEachSegment=function(t){return de(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=ga.XYM&&this.layout!=ga.XYZM)return null;var i=void 0!==e&&e;return Mc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return xb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return fe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return he(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Lc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,ga.XY)},e.prototype.getType=function(){return aa.LINE_STRING},e.prototype.intersectsExtent=function(t){return Tb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Qb(this.flatCoordinates,0,t,this.stride),this.changed()},e}(wa);Gc.default=Oc;var Pc={};var Qc={};var yg=Qc&&Qc.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ie=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.map=r,o.frameState=void 0!==n?n:null,o}return yg(e,t),e}(Ya);Qc.default=ie;var zg=Pc&&Pc.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ag=function(t){function e(e,o,n,r,i){var p=t.call(this,e,o,i)||this;return p.originalEvent=n,p.pixel_=null,p.coordinate_=null,p.dragging=void 0!==r&&r,p}return zg(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(ie);Pc.default=Ag;var xa={SINGLECLICK:"singleclick",CLICK:ka.CLICK,DBLCLICK:ka.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Rc={};var Bg=Rc&&Rc.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Cg=function(t){function e(e,r,i){var o=t.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(e[0]))o.setCoordinates(e,r);else if(void 0!==r&&i)o.setFlatCoordinates(r,e),o.ends_=i;else{for(var s=o.getLayout(),n=e,a=[],l=[],$=0,p=n.length;$<p;++$){var d=n[$];0===$&&(s=d.getLayout()),oa(a,d.getFlatCoordinates()),l.push(a.length)}o.setFlatCoordinates(s,a),o.ends_=l}return o}return Bg(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?oa(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,i){return i<ab(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ic(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Kc(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,i))},e.prototype.getCoordinateAtM=function(t,e,r){if(this.layout!=ga.XYM&&this.layout!=ga.XYZM||0===this.flatCoordinates.length)return null;var i=void 0!==e&&e,o=void 0!==r&&r;return rg(this.flatCoordinates,0,this.ends_,this.stride,t,i,o)},e.prototype.getCoordinates=function(){return Sb(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Oc(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,i=[],o=0,s=0,n=e.length;s<n;++s){var a=e[s],l=new Oc(t.slice(o,a),r);i.push(l),o=a}return i},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,r=0,i=this.ends_,o=this.stride,s=0,n=i.length;s<n;++s){var a=i[s],l=fe(e,r,a,o,.5);oa(t,l),r=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=og(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,i),new e(r,ga.XY,i)},e.prototype.getType=function(){return aa.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return sg(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Fc(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(wa);Rc.default=Cg;var Sc={};var Tc={};var Dg=Tc&&Tc.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Ub=function(t){function e(e,r){var o=t.call(this)||this;return o.setCoordinates(e,r),o}return Dg(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,o){var n=this.flatCoordinates,i=Oa(t,e,n[0],n[1]);if(i<o){for(var s=this.stride,a=0;a<s;++a)r[a]=n[a];return r.length=s,i}return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Ef(this.flatCoordinates,t)},e.prototype.getType=function(){return aa.POINT},e.prototype.intersectsExtent=function(t){return Bd(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Zd(this.flatCoordinates,0,t,this.stride),this.changed()},e}(wa);Tc.default=Ub;var Eg=Sc&&Sc.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),je=function(t){function e(e,r){var n=t.call(this)||this;return r&&!Array.isArray(e[0])?n.setFlatCoordinates(r,e):n.setCoordinates(e,r),n}return Eg(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?oa(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){if(n<ab(this.getExtent(),t,e))return n;for(var o=this.flatCoordinates,i=this.stride,s=0,a=o.length;s<a;s+=i){var $=Oa(t,e,o[s],o[s+1]);if($<n){n=$;for(var l=0;l<i;++l)r[l]=o[s+l];r.length=i}}return n},e.prototype.getCoordinates=function(){return xb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Ub(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,n=[],o=0,i=t.length;o<i;o+=r){var s=new Ub(t.slice(o,o+r),e);n.push(s)}return n},e.prototype.getType=function(){return aa.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,n=0,o=e.length;n<o;n+=r){var i=e[n],s=e[n+1];if(Bd(t,i,s))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Qb(this.flatCoordinates,0,t,this.stride),this.changed()},e}(wa);Sc.default=je;var Uc={};var Ua={};var Vc={};function ke(r,i,n,$){for(var e=0,t=r[n-$],a=r[n-$+1];i<n;i+=$){var o=r[i],g=r[i+1];e+=a*o-t*g,t=o,a=g}return e/2}function le(r,i,n,$){for(var e=0,t=0,a=n.length;t<a;++t){var o=n[t];e+=ke(r,i,o,$),i=o}return e}function Fg(r,i,n,$){for(var e=0,t=0,a=n.length;t<a;++t){var o=n[t];e+=le(r,i,o,$),i=o[o.length-1]}return e}var Gg=Vc&&Vc.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function s(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),Wc=function(t){function e(e,r){var s=t.call(this)||this;return s.maxDelta_=-1,s.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?s.setCoordinates(e,r):s.setFlatCoordinates(r,e),s}return Gg(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,s){return s<ab(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Hc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Jc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,s))},e.prototype.getArea=function(){return ke(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return xb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=Lc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,ga.XY)},e.prototype.getType=function(){return aa.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Qb(this.flatCoordinates,0,t,this.stride),this.changed()},e}(wa);Vc.default=Wc;function me(r,t,e,o,n,$,i){for(var a,O,s,p,f,u,g,w=n[$+1],J=[],l=0,x=e.length;l<x;++l){var y=e[l];for(p=r[y-o],u=r[y-o+1],a=t;a<y;a+=o)f=r[a],g=r[a+1],(w<=u&&g<=w||u<=w&&w<=g)&&(s=(w-u)/(g-u)*(f-p)+p,J.push(s)),p=f,u=g}var h=NaN,v=-1/0;for(J.sort(Za),p=J[0],a=1,O=J.length;a<O;++a){f=J[a];var A=Math.abs(f-p);A>v&&(s=(p+f)/2,Nc(r,t,e,o,s,w)&&(h=s,v=A)),p=f}return isNaN(h)&&(h=n[$]),i?(i.push(h,w,v),i):[h,w,v]}function Hg(r,t,e,o,n){for(var $=[],i=0,a=e.length;i<a;++i){var O=e[i];$=me(r,t,O,o,n,2*i,$),t=O[O.length-1]}return $}function ne(r,e,n,t){for(var i=!0,$=0;$<t;++$)if(r[e+$]!==r[n-t+$]){i=!1;break}i&&(n-=t);var o=Ig(r,e,n,t),p=o-t;p<e&&(p=n-t);var a=o+t;a>=n&&(a=e);var s=r[p],V=r[p+1],g=r[o],l=r[o+1],m=r[a],x=r[a+1];return g*x+s*l+V*m-(V*g+l*m+s*x)<0}function Ig(r,e,n,t){for(var i=-1,$=1/0,o=1/0,p=e;p<n;p+=t){var a=r[p],s=r[p+1];s>$||s==$&&a>=o||(i=p,$=s,o=a)}return i}function oe(r,e,n,t,i){for(var $=void 0!==i&&i,o=0,p=n.length;o<p;++o){var a=n[o],s=ne(r,e,a,t);if(0===o){if($&&s||!$&&!s)return!1}else if($&&!s||!$&&s)return!1;e=a}return!0}function Jg(r,e,n,t,i){for(var $=0,o=n.length;$<o;++$){var p=n[$];if(!oe(r,e,p,t,i))return!1;p.length&&(e=p[p.length-1])}return!0}function Xc(r,e,n,t,i){for(var $=void 0!==i&&i,o=0,p=n.length;o<p;++o){var a=n[o],s=ne(r,e,a,t);(0===o?$&&s||!$&&!s:$&&!s||!$&&s)&&Kg(r,e,a,t),e=a}return e}function pe(r,e,n,t,i){for(var $=0,o=n.length;$<o;++$)e=Xc(r,e,n[$],t,i);return e}function Kg(o,r,$,t){for(;r<$-t;){for(var e=0;e<t;++e){var a=o[r+e];o[r+e]=o[$-t+e],o[$-t+e]=a}r+=t,$-=t}}var Lg=Ua&&Ua.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),eb=function(t){function e(e,r,i){var o=t.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==r&&i?(o.setFlatCoordinates(r,e),o.ends_=i):o.setCoordinates(e,r),o}return Lg(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?oa(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,i){return i<ab(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ic(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Kc(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,i))},e.prototype.containsXY=function(t,e){return Nc(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return le(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Xc(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Sb(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=vc(this.getExtent());this.flatInteriorPoint_=me(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Ub(this.getFlatInteriorPoint(),ga.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Wc(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,i=[],o=0,n=0,s=r.length;n<s;++n){var a=r[n],$=new Wc(e.slice(o,a),t);i.push($),o=a}return i},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;oe(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Xc(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=ce(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,i),new e(r,ga.XY,i)},e.prototype.getType=function(){return aa.POLYGON},e.prototype.intersectsExtent=function(t){return ge(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Fc(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(wa);function Mg(t,e,r,i){for(var o=r||32,n=[],s=0;s<o;++s)oa(n,$f(t,e,2*Math.PI*s/o,i));return n.push(n[0],n[1]),new eb(n,ga.XY,[n.length])}function Ng(t){var e=t[0],r=t[1],i=t[2],o=t[3],n=[e,r,e,o,i,o,i,r,e,r];return new eb(n,ga.XY,[n.length])}function Og(t,e,r){for(var i=e||32,o=t.getStride(),n=t.getLayout(),s=t.getCenter(),a=o*(i+1),$=new Array(a),l=0;l<a;l+=o){$[l]=0,$[l+1]=0;for(var p=2;p<o;p++)$[l+p]=s[p]}var h=[$.length],d=new eb($,n,h);return qe(d,s,t.getRadius(),r),d}function qe(t,e,r,i){for(var o=t.getFlatCoordinates(),n=t.getStride(),s=o.length/n-1,a=i||0,$=0;$<=s;++$){var l=$*n,p=a+2*Rf($,s)*Math.PI/s;o[l]=e[0]+r*Math.cos(p),o[l+1]=e[1]+r*Math.sin(p)}t.changed()}Ua.default=eb,Ua.circular=Mg,Ua.fromExtent=Ng,Ua.fromCircle=Og,Ua.makeRegular=qe;function Pg(r,e,t,$){for(var n=[],a=bb(),i=0,o=t.length;i<o;++i){var s=t[i];a=Dd(r,e,s[0],$),n.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=s[s.length-1]}return n}var Qg=Uc&&Uc.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Rg=function(t){function e(e,i,r){var o=t.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var s=o.getLayout(),n=e,a=[],l=[],$=0,h=n.length;$<h;++$){var d=n[$];0===$&&(s=d.getLayout());for(var p=a.length,u=d.getEnds(),f=0,c=u.length;f<c;++f)u[f]+=p;oa(a,d.getFlatCoordinates()),l.push(u)}i=s,e=a,r=l}return void 0!==i&&r?(o.setFlatCoordinates(i,e),o.endss_=r):o.setCoordinates(e,i),o}return Qg(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;oa(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,o=(e=t.getEnds().slice()).length;r<o;++r)e[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),r=0;r<t;++r)i[r]=this.endss_[r].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,r){return r<ab(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mg(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ng(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))},e.prototype.containsXY=function(t,e){return wg(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Fg(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),pe(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,ee(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Pg(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Hg(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new je(this.getFlatInteriorPoints().slice(),ga.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Jg(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=pe(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=qg(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,r),new e(i,ga.XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var r=this.endss_[t].slice(),o=r[r.length-1];if(0!==e)for(var s=0,n=r.length;s<n;++s)r[s]-=e;return new eb(this.flatCoordinates.slice(e,o),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[],o=0,s=0,n=i.length;s<n;++s){var a=i[s].slice(),l=a[a.length-1];if(0!==o)for(var $=0,h=a.length;$<h;++$)a[$]-=o;var d=new eb(e.slice(o,l),t,a);r.push(d),o=l}return r},e.prototype.getType=function(){return aa.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return ug(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=ig(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(wa);Uc.default=Rg;var Vb={};var yb={};function Sg(n){return Math.pow(n,3)}function Tg(n){return 1-Sg(1-n)}function Ug(n){return n}var Vg=yb&&yb.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),re=function(t){function o(o){var e=t.call(this)||this;return o&&o.handleEvent&&(e.handleEvent=o.handleEvent),e.map_=null,e.setActive(!0),e}return Vg(o,t),o.prototype.getActive=function(){return this.get(ae.ACTIVE)},o.prototype.getMap=function(){return this.map_},o.prototype.handleEvent=function(t){return!0},o.prototype.setActive=function(t){this.set(ae.ACTIVE,t)},o.prototype.setMap=function(t){this.map_=t},o}(Ca);function Wg(t,o,e){var r=t.getCenterInternal();if(r){var n=[r[0]+o[0],r[1]+o[1]];t.animateInternal({duration:void 0!==e?e:250,easing:Ug,center:t.getConstrainedCenter(n)})}}function Xg(t,o,e,r){var n=t.getZoom();if(void 0!==n){var a=t.getConstrainedZoom(n+o),i=t.getResolutionForZoom(a);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:i,anchor:e,duration:void 0!==r?r:250,easing:Tg})}}yb.pan=Wg,yb.zoomByDelta=Xg,yb.default=re;var Yg=Vb&&Vb.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zg=function(e){function t(t){var n=this,r=t||{};return n=e.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return Yg(t,e),t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(e){return!1},t.prototype.handleDragEvent=function(e){},t.prototype.handleEvent=function(e){if(!e.originalEvent)return!0;var t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==xa.POINTERDRAG)this.handleDragEvent(e),e.preventDefault();else if(e.type==xa.POINTERUP){var n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==xa.POINTERDOWN){var r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==xa.POINTERMOVE&&this.handleMoveEvent(e);return!t},t.prototype.handleMoveEvent=function(e){},t.prototype.handleUpEvent=function(e){return!1},t.prototype.stopDown=function(e){return e},t.prototype.updateTrackedPointers_=function(e){if(_g(e)){var t=e.originalEvent,n=t.pointerId.toString();e.type==xa.POINTERUP?delete this.trackedPointers_[n]:e.type==xa.POINTERDOWN?this.trackedPointers_[n]=t:n in this.trackedPointers_&&(this.trackedPointers_[n]=t),this.targetPointers=yd(this.trackedPointers_)}},t}(re);function $g(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++)n+=e[o].clientX,r+=e[o].clientY;return[n/t,r/t]}function _g(e){var t=e.type;return t===xa.POINTERDOWN||t===xa.POINTERDRAG||t===xa.POINTERUP}Vb.centroid=$g,Vb.default=Zg;var Yc={};var Zc={};var Wb={};var $c={};var da={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source"};var ah=$c&&$c.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),se=function(t){function e(e){var r=t.call(this)||this,o=Jb({},e);return o[da.OPACITY]=void 0!==e.opacity?e.opacity:1,la("number"==typeof o[da.OPACITY],64),o[da.VISIBLE]=void 0===e.visible||e.visible,o[da.Z_INDEX]=e.zIndex,o[da.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,o[da.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,o[da.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,o[da.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==o.className?e.className:"ol-layer",delete o.className,r.setProperties(o),r.state_=null,r}return ah(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=tb(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r?r:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return ca()},e.prototype.getLayerStatesArray=function(t){return ca()},e.prototype.getExtent=function(){return this.get(da.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(da.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(da.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(da.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(da.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(da.OPACITY)},e.prototype.getSourceState=function(){return ca()},e.prototype.getVisible=function(){return this.get(da.VISIBLE)},e.prototype.getZIndex=function(){return this.get(da.Z_INDEX)},e.prototype.setExtent=function(t){this.set(da.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(da.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(da.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(da.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(da.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){la("number"==typeof t,64),this.set(da.OPACITY,t)},e.prototype.setVisible=function(t){this.set(da.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(da.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(Ca);$c.default=se;var _c={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var Xb={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};var bh=Wb&&Wb.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),te=function(e){function r(r){var t=this,n=Jb({},r);delete n.source,(t=e.call(this,n)||this).mapPrecomposeKey_=null,t.mapRenderKey_=null,t.sourceChangeKey_=null,t.renderer_=null,r.render&&(t.render=r.render),r.map&&t.setMap(r.map),t.addEventListener($a(da.SOURCE),t.handleSourcePropertyChange_);var i=r.source?r.source:null;return t.setSource(i),t}return bh(r,e),r.prototype.getLayersArray=function(e){var r=e||[];return r.push(this),r},r.prototype.getLayerStatesArray=function(e){var r=e||[];return r.push(this.getLayerState()),r},r.prototype.getSource=function(){return this.get(da.SOURCE)||null},r.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():Xb.UNDEFINED},r.prototype.handleSourceChange_=function(){this.changed()},r.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(ua(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=ta(e,ka.CHANGE,this.handleSourceChange_,this)),this.changed()},r.prototype.getFeatures=function(e){return this.renderer_.getFeatures(e)},r.prototype.render=function(e,r){var t=this.getRenderer();if(t.prepareFrame(e))return t.renderFrame(e,r)},r.prototype.setMap=function(e){this.mapPrecomposeKey_&&(ua(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ua(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=ta(e,_c.PRECOMPOSE,function(e){var r=e.frameState.layerStatesArray,t=this.getLayerState(!1);la(!r.some(function(e){return e.layer===t.layer}),67),r.push(t)},this),this.mapRenderKey_=ta(this,ka.CHANGE,e.render,e),this.changed())},r.prototype.setSource=function(e){this.set(da.SOURCE,e)},r.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},r.prototype.hasRenderer=function(){return!!this.renderer_},r.prototype.createRenderer=function(){return null},r.prototype.disposeInternal=function(){this.setSource(null),e.prototype.disposeInternal.call(this)},r}(se);function ch(e,r){if(!e.visible)return!1;var t=r.resolution;if(t<e.minResolution||t>=e.maxResolution)return!1;var n=r.zoom;return n>e.minZoom&&n<=e.maxZoom}Wb.inView=ch,Wb.default=te;function dh(t){return(dh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ad={};var bd={};var ea={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ue($,r){return Array.isArray($)?$:(void 0===r?r=[$,$]:(r[0]=$,r[1]=$),r)}var ve=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=ue(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return ca()},t.prototype.getImage=function(t){return ca()},t.prototype.getHitDetectionImage=function(){return ca()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return ca()},t.prototype.getImageSize=function(){return ca()},t.prototype.getHitDetectionImageSize=function(){return ca()},t.prototype.getOrigin=function(){return ca()},t.prototype.getSize=function(){return ca()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=ue(t)},t.prototype.listenImageChange=function(t){ca()},t.prototype.load=function(){ca()},t.prototype.unlistenImageChange=function(t){ca()},t}();var eh=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,fh=/^([a-z]*)$|^hsla?\(.*\)$/i;function gh(r){return"string"==typeof r?r:ye(r)}function hh(r){var $=document.createElement("div");if($.style.color=r,""!==$.style.color){document.body.appendChild($);var t=getComputedStyle($).color;return document.body.removeChild($),t}return""}var ih=function(){var r={},$=0;return function(t){var e;if(r.hasOwnProperty(t))e=r[t];else{if($>=1024){var o=0;for(var a in r)0==(3&o++)&&(delete r[a],--$)}e=jh(t),r[t]=e,++$}return e}}();function we(r){return Array.isArray(r)?r:ih(r)}function jh(r){var $,t,e,o,a;if(fh.exec(r)&&(r=hh(r)),eh.exec(r)){var n=r.length-1,g=void 0;g=n<=4?1:2;var i=4===n||8===n;$=parseInt(r.substr(1+0*g,g),16),t=parseInt(r.substr(1+1*g,g),16),e=parseInt(r.substr(1+2*g,g),16),o=i?parseInt(r.substr(1+3*g,g),16):255,1==g&&($=($<<4)+$,t=(t<<4)+t,e=(e<<4)+e,i&&(o=(o<<4)+o)),a=[$,t,e,o/255]}else 0==r.indexOf("rgba(")?xe(a=r.slice(5,-1).split(",").map(Number)):0==r.indexOf("rgb(")?((a=r.slice(4,-1).split(",").map(Number)).push(1),xe(a)):la(!1,14);return a}function xe(r){return r[0]=tb(r[0]+.5|0,0,255),r[1]=tb(r[1]+.5|0,0,255),r[2]=tb(r[2]+.5|0,0,255),r[3]=tb(r[3],0,1),r}function ye(r){var $=r[0];$!=(0|$)&&($=$+.5|0);var t=r[1];t!=(0|t)&&(t=t+.5|0);var e=r[2];return e!=(0|e)&&(e=e+.5|0),"rgba("+$+","+t+","+e+","+(void 0===r[3]?1:r[3])+")"}function pa(r){return Array.isArray(r)?ye(r):r}function qa(e,r,t){var o=t&&t.length?t.shift():cd?new OffscreenCanvas(e||300,r||300):document.createElement("canvas");return e&&(o.width=e),r&&(o.height=r),o.getContext("2d")}var fb="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",d=-1!==fb.indexOf("firefox");var e=-1!==fb.indexOf("safari")&&-1==fb.indexOf("chrom");var f=-1!==fb.indexOf("webkit")&&-1==fb.indexOf("edge");var g=-1!==fb.indexOf("macintosh");var h="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;var cd="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope;var kh="undefined"!=typeof Image&&Image.prototype.decode;var i=function(){var e=!1;try{var $=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,$),window.removeEventListener("_",null,$)}catch(i){}return e}();var lh=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),ze=["style","variant","weight","size","lineHeight","family"],Ae=function(e){var $=e.match(lh);if(!$)return null;for(var L={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,t=ze.length;r<t;++r){var i=$[r+1];void 0!==i&&(L[ze[r]]=i)}return L.families=L.family.split(/,\s?/),L};var Be="10px sans-serif";var ya="#000";var gb="round";var Yb=[];var Zb=0;var hb="round";var zb=10;var Ab="#000";var Bb="center";var $b="middle";var Va=[0,0,0,0];var Cb=1;var Ha=new Ca;var mh=new rb;mh.setSize=function(){console.warn("labelCache is deprecated.")};var nh,_b=null,dd={};var oh=function(){var e,t,$=100,r="32px ",a=["monospace","serif"],f=a.length,o="wmytzilWMYTZIL@#/&?$%10\uF013";function n(e,$,n){for(var s=!0,i=0;i<f;++i){var F=a[i];if(t=ac(e+" "+$+" "+r+F,o),n!=F){var W=ac(e+" "+$+" "+r+n+","+F,o);s=s&&W!=t}}return!!s}function s(){for(var t=!0,r=Ha.getKeys(),a=0,f=r.length;a<f;++a){var o=r[a];Ha.get(o)<$&&(n.apply(this,o.split("\n"))?(kc(dd),_b=null,nh=void 0,Ha.set(o,$)):(Ha.set(o,Ha.get(o)+1,!0),t=!1))}t&&(clearInterval(e),e=void 0)}return function(t){var r=Ae(t);if(r)for(var a=r.families,f=0,o=a.length;f<o;++f){var i=a[f],F=r.style+"\n"+r.weight+"\n"+i;void 0===Ha.get(F)&&(Ha.set(F,$,!0),n(r.style,r.weight,i)||(Ha.set(F,0,!0),void 0===e&&(e=setInterval(s,32))))}}}();var ph=function(){var e,t=dd;return function($){var r=t[$];if(null==r)if(cd){var a=Ae($),f=Ce($,"\u017Dg"),o=isNaN(Number(a.lineHeight))?1.2:Number(a.lineHeight);dd[$]=o*(f.actualBoundingBoxAscent+f.actualBoundingBoxDescent)}else e||((e=document.createElement("div")).innerHTML="M",e.style.margin="0 !important",e.style.padding="0 !important",e.style.position="absolute !important",e.style.left="-99999px !important"),e.style.font=$,document.body.appendChild(e),r=e.offsetHeight,t[$]=r,document.body.removeChild(e);return r}}();function Ce(e,t){return _b||(_b=qa(1,1)),e!=nh&&(_b.font=e,nh=_b.font),_b.measureText(t)}function ac(e,t){return Ce(e,t).width}function De(e,t,$){if(t in $)return $[t];var r=ac(e,t);return $[t]=r,r}function qh(e,t,$){for(var r=t.length,a=0,f=0;f<r;++f){var o=ac(e,t[f]);a=Math.max(a,o),$.push(o)}return a}function Ee(e,t,$,r){0!==t&&(e.translate($,r),e.rotate(t),e.translate(-$,-r))}function Fe(e,t,$,r,a,f,o,n,s,i,F){e.save(),1!==$&&(e.globalAlpha*=$),t&&e.setTransform.apply(e,t),r.contextInstructions?(e.translate(s,i),e.scale(F[0],F[1]),rh(r,e)):F[0]<0||F[1]<0?(e.translate(s,i),e.scale(F[0],F[1]),e.drawImage(r,a,f,o,n,0,0,o,n)):e.drawImage(r,a,f,o,n,s,i,o*F[0],n*F[1]),e.restore()}function rh(e,t){for(var $=e.contextInstructions,r=0,a=$.length;r<a;r+=2)Array.isArray($[r+1])?t[$[r]].apply(t,$[r+1]):t[$[r]]=$[r+1]}var sh=bd&&bd.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ge=function(t){function e(e){var i=this,r=void 0!==e.rotateWithView&&e.rotateWithView;return(i=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_={},i.hitDetectionCanvas_=null,i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.anchor_=null,i.size_=null,i.imageSize_=null,i.hitDetectionImageSize_=null,i.render(),i}return sh(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionCanvas_){var t=this.createRenderOptions();this.createHitDetectionCanvas_(t)}return this.hitDetectionCanvas_},e.prototype.getImage=function(t){if(!this.canvas_[t||1]){var e=this.createRenderOptions(),i=qa(e.size*t||1,e.size*t||1);this.draw_(e,i,0,0,t||1),this.canvas_[t||1]=i.canvas}return this.canvas_[t||1]},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return ea.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.createRenderOptions=function(){var t,e=gb,i=hb,r=0,s=null,o=0,n=0;return this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=Ab),t=pa(t),void 0===(n=this.stroke_.getWidth())&&(n=Cb),s=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(i=this.stroke_.getLineJoin())&&(i=hb),void 0===(e=this.stroke_.getLineCap())&&(e=gb),void 0===(r=this.stroke_.getMiterLimit())&&(r=zb)),{strokeStyle:t,strokeWidth:n,size:2*(this.radius_+n)+1,lineCap:e,lineDash:s,lineDashOffset:o,lineJoin:i,miterLimit:r}},e.prototype.render=function(){var t=this.createRenderOptions(),e=qa(t.size,t.size);this.draw_(t,e,0,0,1),this.canvas_[1]=e.canvas;var i=e.canvas.width,r=i,s=this.getDisplacement();this.hitDetectionImageSize_=[t.size,t.size],this.createHitDetectionCanvas_(t),this.anchor_=[i/2-s[0],i/2+s[1]],this.size_=[i,i],this.imageSize_=[r,r]},e.prototype.draw_=function(t,e,i,r,s){var o,n,a;e.setTransform(s,0,0,s,0,0),e.translate(i,r),e.beginPath();var l=this.points_;if(l===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(l*=2),o=0;o<=l;o++)n=2*o*Math.PI/l-Math.PI/2+this.angle_,a=o%2==0?this.radius_:h,e.lineTo(t.size/2+a*Math.cos(n),t.size/2+a*Math.sin(n))}if(this.fill_){var f=this.fill_.getColor();null===f&&(f=ya),e.fillStyle=pa(f),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionCanvas_=this.getImage(1),this.fill_){var e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=we(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){var r=qa(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,r){e.translate(i,r),e.beginPath();var s=this.points_;if(s===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(s*=2);var n=void 0,a=void 0,l=void 0;for(n=0;n<=s;n++)l=2*n*Math.PI/s-Math.PI/2+this.angle_,a=n%2==0?this.radius_:o,e.lineTo(t.size/2+a*Math.cos(l),t.size/2+a*Math.sin(l))}e.fillStyle=ya,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(ve);bd.default=Ge;var th=ad&&ad.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),He=function(t){function e(e){var r=e||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,displacement:void 0!==r.displacement?r.displacement:[0,0]})||this}return th(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(Ge);ad.default=He;var uh=function(){function o(o){var r=o||{};this.color_=void 0!==r.color?r.color:null}return o.prototype.clone=function(){var r=this.getColor();return new o({color:Array.isArray(r)?r.slice():r||void 0})},o.prototype.getColor=function(){return this.color_},o.prototype.setColor=function(o){this.color_=o},o}();var vh=function(){function t(t){var i=t||{};this.color_=void 0!==i.color?i.color:null,this.lineCap_=i.lineCap,this.lineDash_=void 0!==i.lineDash?i.lineDash:null,this.lineDashOffset_=i.lineDashOffset,this.lineJoin_=i.lineJoin,this.miterLimit_=i.miterLimit,this.width_=i.width}return t.prototype.clone=function(){var i=this.getColor();return new t({color:Array.isArray(i)?i.slice():i||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();var wh=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Je,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===dh(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Je,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();function xh(t){var e;if("function"==typeof t)e=t;else{var o;if(Array.isArray(t))o=t;else la("function"==typeof t.getZIndex,41),o=[t];e=function(){return o}}return e}var Ie=null;function yh(t,e){if(!Ie){var o=new uh({color:"rgba(255,255,255,0.4)"}),r=new vh({color:"#3399CC",width:1.25});Ie=[new wh({image:new He({fill:o,stroke:r,radius:5}),fill:o,stroke:r})]}return Ie}function Je(t){return t.getGeometry()}var zh=Zc&&Zc.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ke={RENDER_ORDER:"renderOrder"},Le=function(t){function e(e){var r=this,n=e||{},i=Jb({},n);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(r=t.call(this,i)||this).declutter_=void 0!==n.declutter&&n.declutter,r.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(n.style),r.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,r.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,r}return zh(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(Ke.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(Ke.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:yh,this.styleFunction_=null===t?void 0:xh(this.style_),this.changed()},e}(te);Zc.default=Le;var ed={};var fd={};var ba={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},bc=[ba.FILL];var Ia=[ba.STROKE];var Wa=[ba.BEGIN_PATH];var Me=[ba.CLOSE_PATH];var Ne=function(){function t(){}return t.prototype.drawCustom=function(t,o,e){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,o){},t.prototype.drawFeature=function(t,o){},t.prototype.drawGeometryCollection=function(t,o){},t.prototype.drawLineString=function(t,o){},t.prototype.drawMultiLineString=function(t,o){},t.prototype.drawMultiPoint=function(t,o){},t.prototype.drawMultiPolygon=function(t,o){},t.prototype.drawPoint=function(t,o){},t.prototype.drawPolygon=function(t,o){},t.prototype.drawText=function(t,o){},t.prototype.setFillStrokeStyle=function(t,o){},t.prototype.setImageStyle=function(t,o){},t.prototype.setTextStyle=function(t,o){},t}();var Ah=fd&&fd.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ib=function(t){function e(e,i,r,n){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=i,o.pixelRatio=n,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return Ah(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,i,r,n,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=r);var h,u,$,l=t[e],p=t[e+1],c=this.tmpCoordinate_,d=!0;for(h=e+r;h<i;h+=r)c[0]=t[h],c[1]=t[h+1],($=sc(a,c))!==u?(d&&(this.coordinates[s++]=l,this.coordinates[s++]=p),this.coordinates[s++]=c[0],this.coordinates[s++]=c[1],d=!1):$===ja.INTERSECTING?(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1],d=!1):d=!0,l=c[0],p=c[1],u=$;return(n&&d||h===e+r)&&(this.coordinates[s++]=l,this.coordinates[s++]=p),s},e.prototype.drawCustomCoordinates_=function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o],h=this.appendFlatCoordinates(t,e,a,r,!1,!1);n.push(h),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var r,n,o,s,a,h=t.getType(),u=t.getStride(),$=this.coordinates.length;if(h==aa.MULTI_POLYGON){r=t.getOrientedFlatCoordinates(),s=[];var l=t.getEndss();a=0;for(var p=0,c=l.length;p<c;++p){var d=[];a=this.drawCustomCoordinates_(r,a,l[p],u,d),s.push(d)}this.instructions.push([ba.CUSTOM,$,s,t,i,ee])}else h==aa.POLYGON||h==aa.MULTI_LINE_STRING?(o=[],r=h==aa.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(r,0,t.getEnds(),u,o),this.instructions.push([ba.CUSTOM,$,o,t,i,Sb])):h==aa.LINE_STRING||h==aa.MULTI_POINT?(r=t.getFlatCoordinates(),n=this.appendFlatCoordinates(r,0,r.length,u,!1,!1),this.instructions.push([ba.CUSTOM,$,n,t,i,xb])):h==aa.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),n=this.coordinates.length,this.instructions.push([ba.CUSTOM,$,n,t,i]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var i=t.getExtent();this.beginGeometryInstruction1_=[ba.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ba.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,r,n=e.length,o=-1;for(t=0;t<n;++t)(r=(i=e[t])[0])==ba.END_GEOMETRY?o=t:r==ba.BEGIN_GEOMETRY&&(i[2]=t,rf(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var r=t.getColor();i.fillStyle=pa(r||ya)}else i.fillStyle=void 0;if(e){var n=e.getColor();i.strokeStyle=pa(n||Ab);var o=e.getLineCap();i.lineCap=void 0!==o?o:gb;var s=e.getLineDash();i.lineDash=s?s.slice():Yb;var a=e.getLineDashOffset();i.lineDashOffset=a||Zb;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:hb;var u=e.getWidth();i.lineWidth=void 0!==u?u:Cb;var $=e.getMiterLimit();i.miterLimit=void 0!==$?$:zb,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[ba.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[ba.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,r=t.lineCap,n=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||n!=t.currentLineDash&&!Ib(t.currentLineDash,n)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=n,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=h)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[ba.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Df(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;rc(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(Ne);fd.default=ib;var gd={};var Bh=gd&&gd.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),Oe=function(t){function i(i,e,o,h){var s=t.call(this,i,e,o,h)||this;return s.declutterGroups_=null,s.hitDetectionImage_=null,s.image_=null,s.imagePixelRatio_=void 0,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s}return Bh(i,t),i.prototype.drawCoordinates_=function(t,i,e,o){return this.appendFlatCoordinates(t,i,e,o,!1,!1)},i.prototype.drawPoint=function(t,i){if(this.image_){this.beginGeometry(t,i);var e=t.getFlatCoordinates(),o=t.getStride(),h=this.coordinates.length,s=this.drawCoordinates_(e,0,e.length,o);this.instructions.push([ba.DRAW_IMAGE,h,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([ba.DRAW_IMAGE,h,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(i)}},i.prototype.drawMultiPoint=function(t,i){if(this.image_){this.beginGeometry(t,i);var e=t.getFlatCoordinates(),o=t.getStride(),h=this.coordinates.length,s=this.drawCoordinates_(e,0,e.length,o);this.instructions.push([ba.DRAW_IMAGE,h,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([ba.DRAW_IMAGE,h,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(i)}},i.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},i.prototype.setImageStyle=function(t,i){var e=t.getAnchor(),o=t.getSize(),h=t.getHitDetectionImage(),s=t.getImage(this.pixelRatio),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.declutterGroups_=i,this.hitDetectionImage_=h,this.image_=s,this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0]},i}(ib);gd.default=Oe;var hd={};var Ch=hd&&hd.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Pe=function(t){function i(i,e,n,o){return t.call(this,i,e,n,o)||this}return Ch(i,t),i.prototype.drawFlatCoordinates_=function(t,i,e,n){var o=this.coordinates.length,r=this.appendFlatCoordinates(t,i,e,n,!1,!1),s=[ba.MOVE_TO_LINE_TO,o,r];return this.instructions.push(s),this.hitDetectionInstructions.push(s),e},i.prototype.drawLineString=function(t,i){var e=this.state,n=e.strokeStyle,o=e.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([ba.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],Wa);var r=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(r,0,r.length,s),this.hitDetectionInstructions.push(Ia),this.endGeometry(i)}},i.prototype.drawMultiLineString=function(t,i){var e=this.state,n=e.strokeStyle,o=e.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([ba.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],Wa);for(var r=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),h=0,p=0,u=r.length;p<u;++p)h=this.drawFlatCoordinates_(s,h,r[p],a);this.hitDetectionInstructions.push(Ia),this.endGeometry(i)}},i.prototype.finish=function(){var i=this.state;return null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&this.instructions.push(Ia),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},i.prototype.applyStroke=function(i){null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&(this.instructions.push(Ia),i.lastStroke=this.coordinates.length),i.lastStroke=0,t.prototype.applyStroke.call(this,i),this.instructions.push(Wa)},i}(ib);hd.default=Pe;var id={};var Dh=id&&id.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function s(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}}(),jd=function(t){function i(i,e,s,o){return t.call(this,i,e,s,o)||this}return Dh(i,t),i.prototype.drawFlatCoordinatess_=function(t,i,e,s){var o=this.state,n=void 0!==o.fillStyle,r=void 0!==o.strokeStyle,u=e.length;this.instructions.push(Wa),this.hitDetectionInstructions.push(Wa);for(var l=0;l<u;++l){var h=e[l],a=this.coordinates.length,$=this.appendFlatCoordinates(t,i,h,s,!0,!r),c=[ba.MOVE_TO_LINE_TO,a,$];this.instructions.push(c),this.hitDetectionInstructions.push(c),r&&(this.instructions.push(Me),this.hitDetectionInstructions.push(Me)),i=h}return n&&(this.instructions.push(bc),this.hitDetectionInstructions.push(bc)),r&&(this.instructions.push(Ia),this.hitDetectionInstructions.push(Ia)),i},i.prototype.drawCircle=function(t,i){var e=this.state,s=e.fillStyle,o=e.strokeStyle;if(void 0!==s||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([ba.SET_FILL_STYLE,ya]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([ba.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var n=t.getFlatCoordinates(),r=t.getStride(),u=this.coordinates.length;this.appendFlatCoordinates(n,0,n.length,r,!1,!1);var l=[ba.CIRCLE,u];this.instructions.push(Wa,l),this.hitDetectionInstructions.push(Wa,l),void 0!==e.fillStyle&&(this.instructions.push(bc),this.hitDetectionInstructions.push(bc)),void 0!==e.strokeStyle&&(this.instructions.push(Ia),this.hitDetectionInstructions.push(Ia)),this.endGeometry(i)}},i.prototype.drawPolygon=function(t,i){var e=this.state,s=e.fillStyle,o=e.strokeStyle;if(void 0!==s||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([ba.SET_FILL_STYLE,ya]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([ba.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var n=t.getEnds(),r=t.getOrientedFlatCoordinates(),u=t.getStride();this.drawFlatCoordinatess_(r,0,n,u),this.endGeometry(i)}},i.prototype.drawMultiPolygon=function(t,i){var e=this.state,s=e.fillStyle,o=e.strokeStyle;if(void 0!==s||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,i),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([ba.SET_FILL_STYLE,ya]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([ba.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);for(var n=t.getEndss(),r=t.getOrientedFlatCoordinates(),u=t.getStride(),l=0,h=0,a=n.length;h<a;++h)l=this.drawFlatCoordinatess_(r,l,n[h],u);this.endGeometry(i)}},i.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var i=this.tolerance;if(0!==i)for(var e=this.coordinates,s=0,o=e.length;s<o;++s)e[s]=Sa(e[s],i);return t.prototype.finish.call(this)},i.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},i}(ib);id.default=jd;var cc={};var Eh={POINT:"point",LINE:"line"};function Fh(t,r,$,a,n){var o,h,i,M,c,e,u,v,j,p=$,s=$,x=0,B=0,O=$;for(o=$;o<a;o+=n){var g=r[o],k=r[o+1];void 0!==M&&(v=g-M,j=k-c,i=Math.sqrt(v*v+j*j),void 0!==e&&(B+=h,Math.acos((e*v+u*j)/(h*i))>t&&(B>x&&(x=B,p=O,s=o),B=0,O=o-n)),h=i,e=v,u=j),M=g,c=k}return(B+=i)>x?[O,o]:[p,s]}var Gh=cc&&cc.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),jb={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};cc.TEXT_ALIGN=jb;var Qe=function(t){function e(e,i,o,r){var s=t.call(this,e,i,o,r)||this;return s.declutterGroups_,s.labels_=null,s.text_="",s.textOffsetX_=0,s.textOffsetY_=0,s.textRotateWithView_=void 0,s.textRotation_=0,s.textFillState_=null,s.fillStates={},s.textStrokeState_=null,s.strokeStates={},s.textState_={},s.textStates={},s.textKey_="",s.fillKey_="",s.strokeKey_="",s}return Gh(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,o=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||o)){var s,a,l=this.coordinates.length,n=t.getType(),$=null,h=2,p=t.getStride();if(r.placement===Eh.LINE){if(!ma(this.getBufferedMaxExtent(),t.getExtent()))return;var u=void 0;if($=t.getFlatCoordinates(),n==aa.LINE_STRING)u=[$.length];else if(n==aa.MULTI_LINE_STRING)u=t.getEnds();else if(n==aa.POLYGON)u=t.getEnds().slice(0,1);else if(n==aa.MULTI_POLYGON){var f=t.getEndss();for(u=[],s=0,a=f.length;s<a;++s)u.push(f[s][0])}this.beginGeometry(t,e);for(var d=r.textAlign,c=0,_=void 0,g=0,x=u.length;g<x;++g){if(null==d){var y=Fh(r.maxAngle,$,c,u[g],p);c=y[0],_=y[1]}else _=u[g];for(s=c;s<_;s+=p)this.coordinates.push($[s],$[s+1]);h=this.coordinates.length,c=u[g];var S=this.declutterGroups_?0===g?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(l,h,S),l=h}this.endGeometry(e)}else{var m=null;switch(r.overflow||(m=[]),n){case aa.POINT:case aa.MULTI_POINT:h=($=t.getFlatCoordinates()).length;break;case aa.LINE_STRING:$=t.getFlatMidpoint();break;case aa.CIRCLE:$=t.getCenter();break;case aa.MULTI_LINE_STRING:p=2,h=($=t.getFlatMidpoints()).length;break;case aa.POLYGON:$=t.getFlatInteriorPoint(),r.overflow||m.push($[2]/this.resolution),p=3;break;case aa.MULTI_POLYGON:var w=t.getFlatInteriorPoints();for($=[],s=0,a=w.length;s<a;s+=3)r.overflow||m.push(w[s+2]/this.resolution),$.push(w[s],w[s+1]);if(p=2,0==(h=$.length))return;}h=this.appendFlatCoordinates($,0,h,p,!1,!1),this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var U=r.padding;if(U!=Va&&(r.scale[0]<0||r.scale[1]<0)){var k=r.padding[0],v=r.padding[1],T=r.padding[2],G=r.padding[3];r.scale[0]<0&&(v=-v,G=-G),r.scale[1]<0&&(k=-k,T=-T),U=[k,v,T,G]}var L=this.pixelRatio;this.instructions.push([ba.DRAW_IMAGE,l,h,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,U==Va?Va:U.map(function(t){return t*L}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,m]);var N=1/L;this.hitDetectionInstructions.push([ba.DRAW_IMAGE,l,h,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[N,N],NaN,U,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,m]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,o=this.strokeKey_;t&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||Bb,textBaseline:e.textBaseline||$b,scale:e.scale});var s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e,i){var o=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,a=this.textKey_,l=this.fillKey_;this.saveTextStates_();var n=this.pixelRatio,$=jb[r.textBaseline],h=this.textOffsetY_*n,p=this.text_,u=o?o.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([ba.DRAW_CHARS,t,e,$,i,r.overflow,l,r.maxAngle,n,h,s,u*n,p,a,1]),this.hitDetectionInstructions.push([ba.DRAW_CHARS,t,e,$,i,r.overflow,l,r.maxAngle,1,h,s,u,p,a,1/n])},e.prototype.setTextStyle=function(t,e){var i,o,r;if(t){this.declutterGroups_=e;var s=t.getFill();s?((o=this.textFillState_)||(o={},this.textFillState_=o),o.fillStyle=pa(s.getColor()||ya)):(o=null,this.textFillState_=o);var a=t.getStroke();if(a){(r=this.textStrokeState_)||(r={},this.textStrokeState_=r);var l=a.getLineDash(),n=a.getLineDashOffset(),$=a.getWidth(),h=a.getMiterLimit();r.lineCap=a.getLineCap()||gb,r.lineDash=l?l.slice():Yb,r.lineDashOffset=void 0===n?Zb:n,r.lineJoin=a.getLineJoin()||hb,r.lineWidth=void 0===$?Cb:$,r.miterLimit=void 0===h?zb:h,r.strokeStyle=pa(a.getColor()||Ab)}else r=null,this.textStrokeState_=r;i=this.textState_;var p=t.getFont()||Be;oh(p);var u=t.getScaleArray();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||$b,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Va,i.scale=void 0===u?[1,1]:u;var f=t.getOffsetX(),d=t.getOffsetY(),c=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0===_?0:_,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:ia(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+ia(o.fillStyle):""}else this.text_=""},e}(ib);cc.default=Qe;var Hh={Circle:jd,Default:ib,Image:Oe,LineString:Pe,Polygon:jd,Text:Qe},Ih=function(){function e(e,r,t,i,B){this.declutter_=B,this.declutterGroups_=null,this.tolerance_=e,this.maxExtent_=r,this.pixelRatio_=i,this.resolution_=t,this.buildersByZIndex_={}}return e.prototype.addDeclutter=function(e){var r=null;return this.declutter_&&(e?(r=this.declutterGroups_)[0][0]++:(r=[[1]],this.declutterGroups_=r)),r},e.prototype.finish=function(){var e={};for(var r in this.buildersByZIndex_){e[r]=e[r]||{};var t=this.buildersByZIndex_[r];for(var i in t){var B=t[i].finish();e[r][i]=B}}return e},e.prototype.getBuilder=function(e,r){var t=void 0!==e?e.toString():"0",i=this.buildersByZIndex_[t];void 0===i&&(i={},this.buildersByZIndex_[t]=i);var B=i[r];void 0===B&&(B=new(0,Hh[r])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[r]=B);return B},e}();var kd={};var ld={};var Jh=ld&&ld.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Re=function(t){function e(e){var r=t.call(this)||this;return r.boundHandleImageChange_=r.handleImageChange_.bind(r),r.layer_=e,r}return Jh(e,t),e.prototype.getFeatures=function(t){return ca()},e.prototype.prepareFrame=function(t){return ca()},e.prototype.renderFrame=function(t,e){return ca()},e.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,e,r){return function(o,a){var n=this.loadedTileCallback.bind(this,r,o);return t.forEachLoadedTile(e,o,a,n)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,o,a){},e.prototype.getDataAtPixel=function(t,e,r){return ca()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===ea.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=ea.LOADED&&e!=ea.ERROR&&t.addEventListener(ka.CHANGE,this.boundHandleImageChange_),e==ea.IDLE&&(t.load(),e=t.getState()),e==ea.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Xb.READY&&t.changed()},e}(lc);ld.default=Re;var md={};var Kh=md&&md.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Se=function(t){function e(e,r,n,o){var $=t.call(this,e)||this;return $.inversePixelTransform=r,$.frameState=n,$.context=o,$}return Kh(e,t),e}(Ya);md.default=Se;var Lh=kd&&kd.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Te=function(t){function e(e){var r=t.call(this,e)||this;return r.container=null,r.renderedResolution,r.tempTransform=Da(),r.pixelTransform=Da(),r.inversePixelTransform=Da(),r.context=null,r.containerReused=!1,r}return Lh(e,t),e.prototype.useContainer=function(t,e,r){var o,n,a=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===a&&($=t.firstElementChild)instanceof HTMLCanvasElement&&(n=$.getContext("2d"));if(!n||0!==n.canvas.width&&n.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=n,this.containerReused=!0),!this.container){(o=document.createElement("div")).className=a;var i=o.style;i.position="absolute",i.width="100%",i.height="100%";var $=(n=qa()).canvas;o.appendChild($),(i=$.style).position="absolute",i.left="0",i.transformOrigin="top left",this.container=o,this.context=n}},e.prototype.clip=function(t,e,r){var o=e.pixelRatio,n=e.size[0]*o/2,a=e.size[1]*o/2,i=e.viewState.rotation,$=wc(r),p=xc(r),s=uc(r),u=tc(r);ha(e.coordinateToPixelTransform,$),ha(e.coordinateToPixelTransform,p),ha(e.coordinateToPixelTransform,s),ha(e.coordinateToPixelTransform,u),t.save(),Ee(t,-i,n,a),t.beginPath(),t.moveTo($[0]*o,$[1]*o),t.lineTo(p[0]*o,p[1]*o),t.lineTo(s[0]*o,s[1]*o),t.lineTo(u[0]*o,u[1]*o),t.clip(),Ee(t,i,n,a)},e.prototype.clipUnrotated=function(t,e,r){var o=wc(r),n=xc(r),a=uc(r),i=tc(r);ha(e.coordinateToPixelTransform,o),ha(e.coordinateToPixelTransform,n),ha(e.coordinateToPixelTransform,a),ha(e.coordinateToPixelTransform,i);var $=this.inversePixelTransform;ha($,o),ha($,n),ha($,a),ha($,i),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,r){var o=this.getLayer();if(o.hasListener(t)){var n=new Se(t,this.inversePixelTransform,r,e);o.dispatchEvent(n)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(_c.PRERENDER,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(_c.POSTRENDER,t,e)},e.prototype.getRenderTransform=function(t,e,r,o,n,a,i){var $=n/2,p=a/2,s=o/e,u=-s,m=-t[0]+i,c=-t[1];return _a(this.tempTransform,$,p,s,u,-r,m,c)},e.prototype.getDataAtPixel=function(t,e,r){var o,n=ha(this.inversePixelTransform,t.slice()),a=this.context;try{var i=Math.round(n[0]),$=Math.round(n[1]),p=document.createElement("canvas"),s=p.getContext("2d");p.width=1,p.height=1,s.clearRect(0,0,1,1),s.drawImage(a.canvas,i,$,1,1,0,0,1,1),o=s.getImageData(0,0,1,1).data}catch(u){return"SecurityError"===u.name?new Uint8Array:o}return 0===o[3]?null:o},e}(Re);kd.default=Te;var fa={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};var nd,Db={},j=arguments[0];!function(t,i){"object"==typeof Db?Db=i():"function"==typeof nd&&nd.amd?nd(i):(t=t||self).RBush=i()}(Db,function(){function t(t,r,e,a,o){!function t(n,r,e,a,o){for(;a>e;){if(a-e>600){var h=a-e+1,s=r-e+1,l=Math.log(h),f=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*f*(h-f)/h)*(s-h/2<0?-1:1),u=Math.max(e,Math.floor(r-s*f/h+p)),m=Math.min(a,Math.floor(r+(h-s)*f/h+p));t(n,r,u,m,o)}var c=n[r],d=e,x=a;for(i(n,e,r),o(n[a],c)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;o(n[d],c)<0;)d++;for(;o(n[x],c)>0;)x--}0===o(n[e],c)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,o||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){o(t,0,t.children.length,i,t)}function o(t,i,n,r,e){e||(e=c(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var o=t.children[a];h(e,t.leaf?r(o):o)}return e}function h(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function m(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function c(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var o=[n,r];o.length;)if(!((r=o.pop())-(n=o.pop())<=e)){var h=n+Math.ceil((r-n)/e/2)*e;t(i,h,n,r,a),o.push(n,h,h,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!m(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var o=i.children[a],h=i.leaf?r(o):o;m(t,h)&&(i.leaf?n.push(o):u(t,h)?this._all(o,n):e.push(o))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!m(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(m(t,a)){if(i.leaf||u(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=c([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,o=this.data,h=this.toBBox(t),s=[],l=[];o||s.length;){if(o||(o=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),o.leaf){var f=e(t,o.children,i);if(-1!==f)return o.children.splice(f,1),s.push(o),this._condense(s),this}a||o.leaf||!u(o,h)?r?(n++,o=r.children[n],a=!1):o=null:(s.push(o),l.push(n),n=0,r=o,o=o.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,o=n-i+1,h=this._maxEntries;if(o<=h)return a(e=c(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(o)/Math.log(h)),h=Math.ceil(o/Math.pow(h,r-1))),(e=c([])).leaf=!1,e.height=r;var s=Math.ceil(o/h),l=s*Math.ceil(Math.sqrt(h));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var p=Math.min(f+l-1,n);d(t,f,p,s,this.compareMinY);for(var u=f;u<=p;u+=s){var m=Math.min(u+s-1,p);e.children.push(this._build(t,u,m,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,o=void 0,h=0;h<i.children.length;h++){var s=i.children[h],l=f(s),p=(u=t,m=s,(Math.max(m.maxX,u.maxX)-Math.min(m.minX,u.minX))*(Math.max(m.maxY,u.maxY)-Math.min(m.minY,u.minY))-l);p<a?(a=p,e=l<e?l:e,o=s):p===a&&l<e&&(e=l,o=s)}i=o||i.children[0]}var u,m;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),h(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var o=this._chooseSplitIndex(n,e,r),h=c(n.children.splice(o,n.children.length-o));h.height=n.height,h.leaf=n.leaf,a(n,this.toBBox),a(h,this.toBBox),i?t[i-1].children.push(h):this._splitRoot(n,h)},r.prototype._splitRoot=function(t,i){this.data=c([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,h,s,l,p,u=1/0,m=1/0,c=i;c<=n-i;c++){var d=o(t,0,c,this.toBBox),x=o(t,c,n,this.toBBox),v=(e=d,a=x,h=void 0,s=void 0,l=void 0,p=void 0,h=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),p=Math.min(e.maxY,a.maxY),Math.max(0,l-h)*Math.max(0,p-s)),M=f(d)+f(x);v<u?(u=v,r=c,m=M<m?M:m):v===u&&M<m&&(m=M,r=c)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=o(t,0,i,e),s=o(t,n-i,n,e),l=p(a)+p(s),f=i;f<n-i;f++){var u=t.children[f];h(a,t.leaf?e(u):u),l+=p(a)}for(var m=n-i-1;m>=i;m--){var c=t.children[m];h(s,t.leaf?e(c):c),l+=p(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)h(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});function Mh(t,r,a,$,e,h,l,o,p,u,M,n){var i,s=[];if(n){var v=Dc(t,r,a,$,n,[t[r],t[r+1]]);i=v[0]>v[v.length-$]}else i=t[r]>t[a-$];for(var N,P,Z=e.length,f=t[r],w=t[r+1],x=t[r+=$],I=t[r+1],m=0,d=Math.sqrt(Math.pow(x-f,2)+Math.pow(I-w,2)),q=!1,c=0;c<Z;++c){for(var O=e[N=i?Z-c-1:c],T=o*p(u,O,M),g=h+T/2;r<a-$&&m+d<g;)f=x,w=I,x=t[r+=$],I=t[r+1],m+=d,d=Math.sqrt(Math.pow(x-f,2)+Math.pow(I-w,2));var j=g-m,b=Math.atan2(I-w,x-f);if(i&&(b+=b>0?-Math.PI:Math.PI),void 0!==P){var k=b-P;if(q=q||0!==k,k+=k>Math.PI?-2*Math.PI:k<-Math.PI?2*Math.PI:0,Math.abs(k)>l)return null}P=b;var y=j/d,z=ub(f,x,y),A=ub(w,I,y);s[N]=[z,A,T/2,b,O],h+=T}return q?s:[[s[0][0],s[0][1],s[0][2],s[0][3],e]]}var za=bb(),Eb=Da(),Aa=[],ra=[],sa=[],Ba=[],Nh=function(){function t(t,e,r,i,a){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderBuffer_=a,this.renderedTransform_=Da(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,r,i){var a=t+e+r+i;if(this.labels_[a])return this.labels_[a];var $=i?this.strokeStates[i]:null,s=r?this.fillStates[r]:null,n=this.textStates[e],o=this.pixelRatio,l=[n.scale[0]*o,n.scale[1]*o],u=jb[n.textAlign||Bb],h=i&&$.lineWidth?$.lineWidth:0,p=t.split("\n"),v=p.length,j=[],m=qh(n.font,p,j),c=ph(n.font),Z=m+h,f=[],d=(Z+2)*l[0],_=(c*v+h)*l[1],x={width:d<0?Math.floor(d):Math.ceil(d),height:_<0?Math.floor(_):Math.ceil(_),contextInstructions:f};(1==l[0]&&1==l[1]||f.push("scale",l),f.push("font",n.font),i)&&(f.push("strokeStyle",$.strokeStyle),f.push("lineWidth",h),f.push("lineCap",$.lineCap),f.push("lineJoin",$.lineJoin),f.push("miterLimit",$.miterLimit),(cd?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(f.push("setLineDash",[$.lineDash]),f.push("lineDashOffset",$.lineDashOffset)));r&&f.push("fillStyle",s.fillStyle),f.push("textBaseline","middle"),f.push("textAlign","center");var g,T=.5-u,y=u*Z+T*h;if(i)for(g=0;g<v;++g)f.push("strokeText",[p[g],y+T*j[g],.5*(h+c)+g*c]);if(r)for(g=0;g<v;++g)f.push("fillText",[p[g],y+T*j[g],.5*(h+c)+g*c]);return this.labels_[a]=x,x},t.prototype.replayTextBackground_=function(t,e,r,i,a,$,s,n){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,e),$&&(this.alignFill_=$[2],n&&(t.fillStyle=$[1]),this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,r,i,a,$,s,n,o,l,u,h,p,v,j,m,c,Z,f){var d=Z||f;r-=$*=v[0],i-=s*=v[1];var _=m+u>a.width?a.width-u:m,x=o+h>a.height?a.height-h:o,g=c[3]+_*v[0]+c[1],T=c[0]+x*v[1]+c[2],y=r-c[3],b=i-c[0];(d||0!==p)&&(Aa[0]=y,Ba[0]=y,Aa[1]=b,ra[1]=b,ra[0]=y+g,sa[0]=ra[0],sa[1]=b+T,Ba[1]=sa[1]);var I=null;if(0!==p){var S=r+$,C=i+s;I=_a(Eb,S,C,1,1,p,-S,-C),ha(Eb,Aa),ha(Eb,ra),ha(Eb,sa),ha(Eb,Ba),Na(Math.min(Aa[0],ra[0],sa[0],Ba[0]),Math.min(Aa[1],ra[1],sa[1],Ba[1]),Math.max(Aa[0],ra[0],sa[0],Ba[0]),Math.max(Aa[1],ra[1],sa[1],Ba[1]),za)}else Na(y,b,y+g,b+T,za);this.renderBuffer_[0]=Math.max(this.renderBuffer_[0],Ea(za)),this.renderBuffer_[1]=Math.max(this.renderBuffer_[1],Lb(za));var E=t.canvas,k=f?f[2]*v[0]/2:0,L=this.renderBuffer_,R=za[0]-k<=(E.width+L[0])/e&&za[2]+k>=-L[0]/e&&za[1]-k<=(E.height+L[1])/e&&za[3]+k>=-L[1]/e;if(j&&(r=Math.round(r),i=Math.round(i)),n){if(!R&&1==n[0])return!1;var w=R?[t,I?I.slice(0):null,l,a,u,h,_,x,r,i,v,za.slice()]:null;w&&(d&&w.push(Z,f,Aa.slice(0),ra.slice(0),sa.slice(0),Ba.slice(0)),n.push(w))}else R&&(d&&this.replayTextBackground_(t,Aa,ra,sa,Ba,Z,f,!1),Fe(t,I,l,a,u,h,_,x,r,i,v));return!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=ha(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,r,i){for(var a=[],$=1,s=t.length;$<s;++$){var n=(h=t[$])[11];a.push({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:e})}var $C6Up$$interop$default=wd(Db);i||(i=new $C6Up$$interop$default.d(9));var o=!1;for($=0,s=a.length;$<s;++$)if(i.collides(a[$])){o=!0;break}if(!o){i.load(a);for(var l=1,u=t.length;l<u;++l){var h,p=(h=t[l])[0],v=p.globalAlpha;v!==r&&(p.globalAlpha=r),h.length>12&&this.replayTextBackground_(h[0],h[14],h[15],h[16],h[17],h[12],h[13],!0),Fe.apply(void 0,h),v!==r&&(p.globalAlpha=v)}}return t.length=1,i},t.prototype.drawLabelWithPointPlacement_=function(t,e,r,i){var a=this.textStates[e],$=this.createLabel(t,e,i,r),s=this.strokeStates[r],n=this.pixelRatio,o=jb[a.textAlign||Bb],l=jb[a.textBaseline||$b],u=s&&s.lineWidth?s.lineWidth:0;return{label:$,anchorX:o*($.width/n-2*a.scale[0])+2*(.5-o)*u,anchorY:l*$.height/n+2*(.5-l)*u}},t.prototype.execute_=function(t,e,r,i,a,$,s){var n;this.declutterItems.length=0,this.pixelCoordinates_&&Ib(r,this.renderedTransform_)?n=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),n=Ra(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),xf(this.renderedTransform_,r));for(var o,l,u,h,p,v,j,m,c,Z,f,d,_,x,g,T,y,b=0,I=i.length,S=0,C=0,E=0,k=null,L=null,R=this.coordinateCache_,w=this.viewRotation_,A=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,M={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:w},O=this.instructions!=i||this.overlaps?0:200;b<I;){var D=i[b];switch(D[0]){case ba.BEGIN_GEOMETRY:(g=D[1]).getGeometry()?void 0===s||ma(s,D[3])?++b:b=D[2]+1:b=D[2];break;case ba.BEGIN_PATH:C>O&&(this.fill_(t),C=0),E>O&&(t.stroke(),E=0),C||E||(t.beginPath(),h=NaN,p=NaN),++b;break;case ba.CIRCLE:var B=n[S=D[1]],W=n[S+1],q=n[S+2]-B,N=n[S+3]-W,P=Math.sqrt(q*q+N*N);t.moveTo(B+P,W),t.arc(B,W,P,0,2*Math.PI,!0),++b;break;case ba.CLOSE_PATH:t.closePath(),++b;break;case ba.CUSTOM:S=D[1],o=D[2];var F=D[3],G=D[4],X=6==D.length?D[5]:void 0;M.geometry=F,M.feature=g,b in R||(R[b]=[]);var Y=R[b];X?X(n,S,o,2,Y):(Y[0]=n[S],Y[1]=n[S+1],Y.length=2),G(Y,M),++b;break;case ba.DRAW_IMAGE:S=D[1],o=D[2],Z=D[3],l=D[4],u=D[5],c=$?null:D[6];var H=D[7],J=D[8],K=D[9],U=D[10],V=D[11],z=D[12],Q=D[13],tt=D[14];if(!Z&&D.length>=19){f=D[18],d=D[19],_=D[20],x=D[21];var et=this.drawLabelWithPointPlacement_(f,d,_,x);Z=et.label,D[3]=Z;var rt=D[22];l=(et.anchorX-rt)*this.pixelRatio,D[4]=l;var it=D[23];u=(et.anchorY-it)*this.pixelRatio,D[5]=u,H=Z.height,D[7]=H,tt=Z.width,D[14]=tt}var at=void 0;D.length>24&&(at=D[24]);var $t=void 0,st=void 0,nt=void 0;D.length>16?($t=D[15],st=D[16],nt=D[17]):($t=Va,st=!1,nt=!1),V&&A?z+=w:V||A||(z-=w);for(var ot=0,lt=0;S<o;S+=2)if(!(at&&at[ot++]<tt/this.pixelRatio)){if(c){var ut=Math.floor(lt);m=c.length<ut+1?[c[0][0]]:c[ut]}(Et=this.replayImageOrLabel_(t,e,n[S],n[S+1],Z,l,u,m,H,J,K,U,z,Q,a,tt,$t,st?k:null,nt?L:null))&&m&&c[c.length-1]!==m&&c.push(m),m&&(m.length-1===m[0]&&this.declutterItems.push(this,m,g),lt+=1/m[0])}++b;break;case ba.DRAW_CHARS:var ht=D[1],pt=D[2],vt=D[3];m=$?null:D[4];var jt=D[5];x=D[6];var mt=D[7],ct=D[8],Zt=D[9];_=D[10];var ft=D[11];f=D[12],d=D[13];var dt=[D[14],D[14]],_t=this.textStates[d],xt=_t.font,gt=[_t.scale[0]*ct,_t.scale[1]*ct],Tt=void 0;xt in this.widths_?Tt=this.widths_[xt]:(Tt={},this.widths_[xt]=Tt);var yt=he(n,ht,pt,2),bt=Math.abs(gt[0])*De(xt,f,Tt);if(jt||bt<=yt){var It=this.textStates[d].textAlign,St=(yt-bt)*jb[It],Ct=Mh(n,ht,pt,2,f,St,mt,Math.abs(gt[0]),De,xt,Tt,A?0:this.viewRotation_);if(Ct){var Et=!1,kt=void 0,Lt=void 0,Rt=void 0,wt=void 0,At=void 0;if(_)for(kt=0,Lt=Ct.length;kt<Lt;++kt)Rt=(At=Ct[kt])[4],wt=this.createLabel(Rt,d,"",_),l=At[2]+ft,u=vt*wt.height+2*(.5-vt)*ft*gt[1]/gt[0]-Zt,Et=this.replayImageOrLabel_(t,e,At[0],At[1],wt,l,u,m,wt.height,1,0,0,At[3],dt,!1,wt.width,Va,null,null)||Et;if(x)for(kt=0,Lt=Ct.length;kt<Lt;++kt)Rt=(At=Ct[kt])[4],wt=this.createLabel(Rt,d,x,""),l=At[2],u=vt*wt.height-Zt,Et=this.replayImageOrLabel_(t,e,At[0],At[1],wt,l,u,m,wt.height,1,0,0,At[3],dt,!1,wt.width,Va,null,null)||Et;Et&&this.declutterItems.push(this,m,g)}}++b;break;case ba.END_GEOMETRY:if(void 0!==$){var Mt=$(g=D[1]);if(Mt)return Mt}++b;break;case ba.FILL:O?C++:this.fill_(t),++b;break;case ba.MOVE_TO_LINE_TO:for(S=D[1],o=D[2],T=n[S],j=(y=n[S+1])+.5|0,(v=T+.5|0)===h&&j===p||(t.moveTo(T,y),h=v,p=j),S+=2;S<o;S+=2)v=(T=n[S])+.5|0,j=(y=n[S+1])+.5|0,S!=o-2&&v===h&&j===p||(t.lineTo(T,y),h=v,p=j);++b;break;case ba.SET_FILL_STYLE:k=D,this.alignFill_=D[2],C&&(this.fill_(t),C=0,E&&(t.stroke(),E=0)),t.fillStyle=D[1],++b;break;case ba.SET_STROKE_STYLE:L=D,E&&(t.stroke(),E=0),this.setStrokeStyle_(t,D),++b;break;case ba.STROKE:O?E++:t.stroke(),++b;break;default:++b;}}C&&this.fill_(t),E&&t.stroke()},t.prototype.execute=function(t,e,r,i,a){this.viewRotation_=i,this.execute_(t,e,r,this.instructions,a,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,r,i,a){return this.viewRotation_=r,this.execute_(t,1,e,this.hitDetectionInstructions,!0,i,a)},t}();var od=[fa.POLYGON,fa.CIRCLE,fa.LINE_STRING,fa.IMAGE,fa.TEXT,fa.DEFAULT],Oh=function(){function r(r,e,t,i,o,$){this.maxExtent_=r,this.overlaps_=i,this.pixelRatio_=t,this.resolution_=e,this.renderBuffer_=$,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Da(),this.createExecutors_(o)}return r.prototype.clip=function(r,e){var t=this.getClipCoords(e);r.beginPath(),r.moveTo(t[0],t[1]),r.lineTo(t[2],t[3]),r.lineTo(t[4],t[5]),r.lineTo(t[6],t[7]),r.clip()},r.prototype.createExecutors_=function(r){for(var e in r){var t=this.executorsByZIndex_[e];void 0===t&&(t={},this.executorsByZIndex_[e]=t);var i=r[e],o=[this.renderBuffer_||0,this.renderBuffer_||0];for(var $ in i){var a=i[$];t[$]=new Nh(this.resolution_,this.pixelRatio_,this.overlaps_,a,o)}}},r.prototype.hasExecutors=function(r){for(var e in this.executorsByZIndex_)for(var t=this.executorsByZIndex_[e],i=0,o=r.length;i<o;++i)if(r[i]in t)return!0;return!1},r.prototype.forEachFeatureAtCoordinate=function(r,e,t,i,o,$){var a=2*(i=Math.round(i))+1,n=_a(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-t,-r[0],-r[1]);this.hitDetectionContext_||(this.hitDetectionContext_=qa(a,a));var y,l=this.hitDetectionContext_;l.canvas.width!==a||l.canvas.height!==a?(l.canvas.width=a,l.canvas.height=a):l.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(y=bb(),Ff(y,r),rc(y,e*(this.renderBuffer_+i),y));var c,s=Ph(i);function u(r){for(var e=l.getImageData(0,0,a,a).data,t=0;t<a;t++)for(var i=0;i<a;i++)if(s[t][i]&&e[4*(i*a+t)+3]>0){var n=void 0;return(!$||c!=fa.IMAGE&&c!=fa.TEXT||-1!==$.indexOf(r))&&(n=o(r)),n||void l.clearRect(0,0,a,a)}}var p,R,f,d,h,v=Object.keys(this.executorsByZIndex_).map(Number);for(v.sort(Za),p=v.length-1;p>=0;--p){var x=v[p].toString();for(f=this.executorsByZIndex_[x],R=od.length-1;R>=0;--R)if(void 0!==(d=f[c=od[R]])&&(h=d.executeHitDetection(l,n,t,u,y)))return h}},r.prototype.getClipCoords=function(r){var e=this.maxExtent_;if(!e)return null;var t=e[0],i=e[1],o=e[2],$=e[3],a=[t,i,t,$,o,$,o,i];return Ra(a,0,8,2,r,a),a},r.prototype.isEmpty=function(){return qb(this.executorsByZIndex_)},r.prototype.execute=function(r,e,t,i,o,$,a){var n=Object.keys(this.executorsByZIndex_).map(Number);n.sort(Za),this.maxExtent_&&(r.save(),this.clip(r,t));var y,l,c,s,u,p,R=$||od;for(y=0,l=n.length;y<l;++y){var f=n[y].toString();for(u=this.executorsByZIndex_[f],c=0,s=R.length;c<s;++c){var d=R[c];if(void 0!==(p=u[d]))if(!a||d!=fa.IMAGE&&d!=fa.TEXT)p.execute(r,e,t,i,o);else{var h=a[f];h?h.push(p,t.slice(0)):a[f]=[p,t.slice(0)]}}}this.maxExtent_&&r.restore()},r}(),pd={0:[[!0]]};function Ja(r,e,t){var i,o=Math.floor(r.length/2);if(e>=o)for(i=o;i<e;i++)r[i][t]=!0;else if(e<o)for(i=e+1;i<o;i++)r[i][t]=!0}function Ph(r){if(void 0!==pd[r])return pd[r];for(var e=2*r+1,t=new Array(e),i=0;i<e;i++)t[i]=new Array(e);for(var o=r,$=0,a=0;o>=$;)Ja(t,r+o,r+$),Ja(t,r+$,r+o),Ja(t,r-$,r+o),Ja(t,r-o,r+$),Ja(t,r-o,r-$),Ja(t,r-$,r-o),Ja(t,r+$,r-o),Ja(t,r+o,r-$),2*((a+=1+2*++$)-o)+1>0&&(a+=1-2*(o-=1));return pd[r]=t,t}function Qh(r,e,t,i,o,$){for(var a=Object.keys(r).map(Number).sort(Za),n=0,y=a.length;n<y;++n)for(var l=r[a[n].toString()],c=void 0,s=0,u=l.length;s<u;){var p=l[s++],R=l[s++];p.execute(e,1,R,t,o),p!==c&&p.declutterItems.length>0&&(c=p,$.push({items:p.declutterItems,opacity:i}))}}var kb={ANIMATING:0,INTERACTING:1};function Rh(e,t,r,a,o,i,n){var $=e[0]/2,s=e[1]/2,c=qa($,s);c.imageSmoothingEnabled=!1;for(var f=c.canvas,m=new Ue(c,.5,o,null,n),g=r.length,p=Math.floor(16777215/g),h={},l=1;l<=g;++l){var v=r[l-1],u=v.getStyleFunction()||a;if(a){var y=u(v,i);if(y){Array.isArray(y)||(y=[y]);for(var d="#"+("000000"+(l*p).toString(16)).slice(-6),I=0,x=y.length;I<x;++I){var S=y[I],D=S.clone(),w=D.getFill();w&&w.setColor(d);var C=D.getStroke();C&&C.setColor(d),D.setText(void 0);var T=S.getImage();if(T){var G=T.getImageSize();if(!G)continue;var j=document.createElement("canvas");j.width=G[0],j.height=G[1];var q=j.getContext("2d",{alpha:!1});q.fillStyle=d;var E=q.canvas;q.fillRect(0,0,E.width,E.height);var A=G?G[0]:E.width,N=G?G[1]:E.height;qa(A,N).drawImage(E,0,0),D.setImage(new $e({img:E,imgSize:G,anchor:T.getAnchor(),anchorXUnits:Ka.PIXELS,anchorYUnits:Ka.PIXELS,offset:T.getOrigin(),size:T.getSize(),opacity:T.getOpacity(),scale:T.getScale(),rotation:T.getRotation(),rotateWithView:T.getRotateWithView()}))}var O=Number(D.getZIndex());(M=h[O])||(M={},h[O]=M,M[aa.POLYGON]=[],M[aa.CIRCLE]=[],M[aa.LINE_STRING]=[],M[aa.POINT]=[]);var R=D.getGeometryFunction()(v);R&&ma(o,R.getExtent())&&M[R.getType().replace("Multi","")].push(R,D)}}}}for(var b=Object.keys(h).map(Number).sort(Za),L=(l=0,b.length);l<L;++l){var M=h[b[l]];for(var U in M){var z=M[U];for(I=0,x=z.length;I<x;I+=2){m.setStyle(z[I+1]);for(var F=0,P=t.length;F<P;++F)m.setTransform(t[F]),m.drawGeometry(z[I])}}}return c.getImageData(0,0,f.width,f.height)}function Sh(e,t,r){var a=[];if(r){var o=4*(Math.round(e[0]/2)+Math.round(e[1]/2)*r.width),i=r.data[o],n=r.data[o+1],$=r.data[o+2]+256*(n+256*i),s=Math.floor(16777215/t.length);$&&$%s==0&&a.push(t[$/s-1])}return a}var qd={};var Th=qd&&qd.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),Ue=function(t){function e(e,i,s,a,r,o,n){var l=t.call(this)||this;return l.context_=e,l.pixelRatio_=i,l.extent_=s,l.transform_=a,l.viewRotation_=r,l.squaredTolerance_=o,l.userTransform_=n,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=[0,0],l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=[0,0],l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=Da(),l}return Th(e,t),e.prototype.drawImages_=function(t,e,i,s){if(this.image_){var a=Ra(t,e,i,2,this.transform_,this.pixelCoordinates_),r=this.context_,o=this.tmpLocalTransform_,n=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=n*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var h=0,m=a.length;h<m;h+=2){var _=a[h]-this.imageAnchorX_,f=a[h+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var g=_+this.imageAnchorX_,p=f+this.imageAnchorY_;_a(o,g,p,1,1,l,-g,-p),r.setTransform.apply(r,o),r.translate(g,p),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.setTransform(1,0,0,1,0,0)}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,_,f,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=n)}},e.prototype.drawText_=function(t,e,i,s){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var a=Ra(t,e,i,s,this.transform_,this.pixelCoordinates_),r=this.context_,o=this.textRotation_;for(this.textRotateWithView_&&(o+=this.viewRotation_);e<i;e+=s){var n=a[e]+this.textOffsetX_,l=a[e+1]+this.textOffsetY_;if(0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]){var h=_a(this.tmpLocalTransform_,n,l,1,1,o,-n,-l);r.setTransform.apply(r,h),r.translate(n,l),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&r.strokeText(this.text_,n,l),this.textFillState_&&r.fillText(this.text_,n,l)}}},e.prototype.moveToLineTo_=function(t,e,i,s,a){var r=this.context_,o=Ra(t,e,i,s,this.transform_,this.pixelCoordinates_);r.moveTo(o[0],o[1]);var n=o.length;a&&(n-=2);for(var l=2;l<n;l+=2)r.lineTo(o[l],o[l+1]);return a&&r.closePath(),i},e.prototype.drawRings_=function(t,e,i,s){for(var a=0,r=i.length;a<r;++a)e=this.moveToLineTo_(t,e,i[a],s,!0);return e},e.prototype.drawCircle=function(t){if(ma(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Yd(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],a=Math.sqrt(i*i+s*s),r=this.context_;r.beginPath(),r.arc(e[0],e[1],a,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case aa.POINT:this.drawPoint(t);break;case aa.LINE_STRING:this.drawLineString(t);break;case aa.POLYGON:this.drawPolygon(t);break;case aa.MULTI_POINT:this.drawMultiPoint(t);break;case aa.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case aa.MULTI_POLYGON:this.drawMultiPolygon(t);break;case aa.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case aa.CIRCLE:this.drawCircle(t);}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&ma(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ma(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var s=t.getFlatMidpoint();this.drawText_(s,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(ma(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,s=t.getFlatCoordinates(),a=0,r=t.getEnds(),o=t.getStride();i.beginPath();for(var n=0,l=r.length;n<l;++n)a=this.moveToLineTo_(s,a,r[n],o,!1);i.stroke()}if(""!==this.text_){var h=t.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ma(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ma(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),s=0,a=t.getEndss(),r=t.getStride();e.beginPath();for(var o=0,n=a.length;o<n;++o){var l=a[o];s=this.drawRings_(i,s,l,r)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var h=t.getFlatInteriorPoints();this.drawText_(h,0,h.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(Ib(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:Bb;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:pa(i||ya)}}else this.fillState_=null;if(e){var s=e.getColor(),a=e.getLineCap(),r=e.getLineDash(),o=e.getLineDashOffset(),n=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit();this.strokeState_={lineCap:void 0!==a?a:gb,lineDash:r||Yb,lineDashOffset:o||Zb,lineJoin:void 0!==n?n:hb,lineWidth:this.pixelRatio_*(void 0!==l?l:Cb),miterLimit:void 0!==h?h:zb,strokeStyle:pa(s||Ab)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getSize();if(e){var i=t.getAnchor(),s=t.getImage(1),a=t.getOrigin(),r=t.getScaleArray();this.imageAnchorX_=i[0],this.imageAnchorY_=i[1],this.imageHeight_=e[1],this.image_=s,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=[this.pixelRatio_*r[0],this.pixelRatio_*r[1]],this.imageWidth_=e[0]}else this.image_=null}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:pa(i||ya)}}else this.textFillState_=null;var s=t.getStroke();if(s){var a=s.getColor(),r=s.getLineCap(),o=s.getLineDash(),n=s.getLineDashOffset(),l=s.getLineJoin(),h=s.getWidth(),m=s.getMiterLimit();this.textStrokeState_={lineCap:void 0!==r?r:gb,lineDash:o||Yb,lineDashOffset:n||Zb,lineJoin:void 0!==l?l:hb,lineWidth:void 0!==h?h:Cb,miterLimit:void 0!==m?m:zb,strokeStyle:pa(a||Ab)}}else this.textStrokeState_=null;var _=t.getFont(),f=t.getOffsetX(),g=t.getOffsetY(),p=t.getRotateWithView(),$=t.getRotation(),x=t.getScaleArray(),S=t.getText(),c=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:void 0!==_?_:Be,textAlign:void 0!==c?c:Bb,textBaseline:void 0!==d?d:$b},this.text_=void 0!==S?S:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==g?this.pixelRatio_*g:0,this.textRotateWithView_=void 0!==p&&p,this.textRotation_=void 0!==$?$:0,this.textScale_=[this.pixelRatio_*x[0],this.pixelRatio_*x[1]]}else this.text_=""},e}(Ne);qd.default=Ue;var Ka={FRACTION:"fraction",PIXELS:"pixels"};var rd={};var na={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};var dc={};var Uh=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var r=this.cache_[t];0!=(3&e++)||r.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}},e.prototype.get=function(e,t,r){var i=Ve(e,t,r);return i in this.cache_?this.cache_[i]:null},e.prototype.set=function(e,t,r,i){var a=Ve(e,t,r);this.cache_[a]=i,++this.cacheSize_},e.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},e}();function Ve(e,t,r){return t+":"+e+":"+(r?gh(r):"null")}var We=new Uh;var ec={};var sd={};var Vh=sd&&sd.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),Xe=function(t){function e(e,r,o,n){var s=t.call(this)||this;return s.extent=e,s.pixelRatio_=o,s.resolution=r,s.state=n,s}return Vh(e,t),e.prototype.changed=function(){this.dispatchEvent(ka.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return ca()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){ca()},e}(rb);sd.default=Xe;var Wh=ec&&ec.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Xh=function(t){function e(e,n,i,r,o,a){var $=t.call(this,e,n,i,ea.IDLE)||this;return $.src_=r,$.image_=new Image,null!==o&&($.image_.crossOrigin=o),$.unlisten_=null,$.state=ea.IDLE,$.imageLoadFunction_=a,$}return Wh(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=ea.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Lb(this.extent)/this.image_.height),this.state=ea.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=ea.IDLE&&this.state!=ea.ERROR||(this.state=ea.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=td(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Xe);function td(t,e,n){var i=t;if(i.src&&kh){var r=i.decode(),o=!0;return r.then(function(){o&&e()}).catch(function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():n())}),function(){o=!1}}var a=[Kb(i,ka.LOAD,e),Kb(i,ka.ERROR,n)];return function(){a.forEach(ua)}}ec.listenImage=td,ec.default=Xh;var Yh=dc&&dc.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),ud=null,Ye=function(t){function e(e,i,a,n,r,o){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==n&&(s.image_.crossOrigin=n),s.canvas_={},s.color_=o,s.unlisten_=null,s.imageState_=r,s.size_=a,s.src_=i,s.tainted_,s}return Yh(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===ea.LOADED){ud||(ud=qa(1,1)),ud.drawImage(this.image_,0,0);try{ud.getImageData(0,0,1,1),this.tainted_=!1}catch(t){ud=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(ka.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=ea.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=ea.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=qa(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==ea.IDLE){this.imageState_=ea.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=td(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),this.isTainted_()){var a=this.color_;return i.globalCompositeOperation="multiply",i.fillStyle="rgb("+a[0]+","+a[1]+","+a[2]+")",i.fillRect(0,0,e.width,e.height),i.globalCompositeOperation="destination-in",void i.drawImage(this.image_,0,0)}for(var n=i.getImageData(0,0,e.width,e.height),r=n.data,o=this.color_[0]/255,s=this.color_[1]/255,h=this.color_[2]/255,m=0,$=r.length;m<$;m+=4)r[m]*=o,r[m+1]*=s,r[m+2]*=h;i.putImageData(n,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(rb);function Ze(t,e,i,a,n,r){var o=We.get(e,a,r);return o||(o=new Ye(t,e,i,a,n,r),We.set(e,a,r,o)),o}dc.get=Ze,dc.default=Ye;var Zh=rd&&rd.__extends||function(){var i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),$e=function(i){function t(t){var o=this,r=t||{},n=void 0!==r.opacity?r.opacity:1,e=void 0!==r.rotation?r.rotation:0,s=void 0!==r.scale?r.scale:1,c=void 0!==r.rotateWithView&&r.rotateWithView;(o=i.call(this,{opacity:n,rotation:e,scale:s,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:c})||this).anchor_=void 0!==r.anchor?r.anchor:[.5,.5],o.normalizedAnchor_=null,o.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:na.TOP_LEFT,o.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:Ka.FRACTION,o.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:Ka.FRACTION,o.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var a=void 0!==r.img?r.img:null,h=void 0!==r.imgSize?r.imgSize:null,$=r.src;la(!(void 0!==$&&a),4),la(!a||a&&h,5),void 0!==$&&0!==$.length||!a||($=a.src||ia(a)),la(void 0!==$&&$.length>0,6);var g=void 0!==r.src?ea.IDLE:ea.LOADED;return o.color_=void 0!==r.color?we(r.color):null,o.iconImage_=Ze(a,$,h,o.crossOrigin_,g,o.color_),o.offset_=void 0!==r.offset?r.offset:[0,0],o.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:na.TOP_LEFT,o.origin_=null,o.size_=void 0!==r.size?r.size:null,o}return Zh(t,i),t.prototype.clone=function(){var i=this.getScale();return new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(i)?i.slice():i,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},t.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var i=this.anchor_,t=this.getSize();if(this.anchorXUnits_==Ka.FRACTION||this.anchorYUnits_==Ka.FRACTION){if(!t)return null;i=this.anchor_.slice(),this.anchorXUnits_==Ka.FRACTION&&(i[0]*=t[0]),this.anchorYUnits_==Ka.FRACTION&&(i[1]*=t[1])}if(this.anchorOrigin_!=na.TOP_LEFT){if(!t)return null;i===this.anchor_&&(i=this.anchor_.slice()),this.anchorOrigin_!=na.TOP_RIGHT&&this.anchorOrigin_!=na.BOTTOM_RIGHT||(i[0]=-i[0]+t[0]),this.anchorOrigin_!=na.BOTTOM_LEFT&&this.anchorOrigin_!=na.BOTTOM_RIGHT||(i[1]=-i[1]+t[1])}return this.normalizedAnchor_=i,this.normalizedAnchor_},t.prototype.setAnchor=function(i){this.anchor_=i,this.normalizedAnchor_=null},t.prototype.getColor=function(){return this.color_},t.prototype.getImage=function(i){return this.iconImage_.getImage(i)},t.prototype.getPixelRatio=function(i){return this.iconImage_.getPixelRatio(i)},t.prototype.getImageSize=function(){return this.iconImage_.getSize()},t.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},t.prototype.getImageState=function(){return this.iconImage_.getImageState()},t.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},t.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var i=this.offset_,t=this.getDisplacement();if(this.offsetOrigin_!=na.TOP_LEFT){var o=this.getSize(),r=this.iconImage_.getSize();if(!o||!r)return null;i=i.slice(),this.offsetOrigin_!=na.TOP_RIGHT&&this.offsetOrigin_!=na.BOTTOM_RIGHT||(i[0]=r[0]-o[0]-i[0]),this.offsetOrigin_!=na.BOTTOM_LEFT&&this.offsetOrigin_!=na.BOTTOM_RIGHT||(i[1]=r[1]-o[1]-i[1])}return i[0]+=t[0],i[1]+=t[1],this.origin_=i,this.origin_},t.prototype.getSrc=function(){return this.iconImage_.getSrc()},t.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},t.prototype.listenImageChange=function(i){this.iconImage_.addEventListener(ka.CHANGE,i)},t.prototype.load=function(){this.iconImage_.load()},t.prototype.unlistenImageChange=function(i){this.iconImage_.removeEventListener(ka.CHANGE,i)},t}(ve);rd.default=$e;var $h=.5,_e={Point:hi,LineString:ei,Polygon:ji,MultiPoint:ii,MultiLineString:fi,MultiPolygon:gi,GeometryCollection:di,Circle:bi};function _h(e,r){return parseInt(ia(e),10)-parseInt(ia(r),10)}function ai(e,r){var t=af(e,r);return t*t}function af(e,r){return $h*e/r}function bi(e,r,t,o){var $=t.getFill(),i=t.getStroke();if($||i){var a=e.getBuilder(t.getZIndex(),fa.CIRCLE);a.setFillStrokeStyle($,i),a.drawCircle(r,o)}var n=t.getText();if(n){var l=e.getBuilder(t.getZIndex(),fa.TEXT);l.setTextStyle(n,e.addDeclutter(!1)),l.drawText(r,o)}}function bf(e,r,t,o,$,i){var a=!1,n=t.getImage();if(n){var l=n.getImageState();l==ea.LOADED||l==ea.ERROR?n.unlistenImageChange($):(l==ea.IDLE&&n.load(),l=n.getImageState(),n.listenImageChange($),a=!0)}return ci(e,r,t,o,i),a}function ci(e,r,t,o,$){var i=t.getGeometryFunction()(r);if(i){var a=i.simplifyTransformed(o,$);if(t.getRenderer())cf(e,a,t,r);else(0,_e[a.getType()])(e,a,t,r)}}function cf(e,r,t,o){if(r.getType()!=aa.GEOMETRY_COLLECTION)e.getBuilder(t.getZIndex(),fa.DEFAULT).drawCustom(r,o,t.getRenderer());else for(var $=r.getGeometries(),i=0,a=$.length;i<a;++i)cf(e,$[i],t,o)}function di(e,r,t,o){var $,i,a=r.getGeometriesArray();for($=0,i=a.length;$<i;++$){(0,_e[a[$].getType()])(e,a[$],t,o)}}function ei(e,r,t,o){var $=t.getStroke();if($){var i=e.getBuilder(t.getZIndex(),fa.LINE_STRING);i.setFillStrokeStyle(null,$),i.drawLineString(r,o)}var a=t.getText();if(a){var n=e.getBuilder(t.getZIndex(),fa.TEXT);n.setTextStyle(a,e.addDeclutter(!1)),n.drawText(r,o)}}function fi(e,r,t,o){var $=t.getStroke();if($){var i=e.getBuilder(t.getZIndex(),fa.LINE_STRING);i.setFillStrokeStyle(null,$),i.drawMultiLineString(r,o)}var a=t.getText();if(a){var n=e.getBuilder(t.getZIndex(),fa.TEXT);n.setTextStyle(a,e.addDeclutter(!1)),n.drawText(r,o)}}function gi(e,r,t,o){var $=t.getFill(),i=t.getStroke();if(i||$){var a=e.getBuilder(t.getZIndex(),fa.POLYGON);a.setFillStrokeStyle($,i),a.drawMultiPolygon(r,o)}var n=t.getText();if(n){var l=e.getBuilder(t.getZIndex(),fa.TEXT);l.setTextStyle(n,e.addDeclutter(!1)),l.drawText(r,o)}}function hi(e,r,t,o){var $=t.getImage();if($){if($.getImageState()!=ea.LOADED)return;var i=e.getBuilder(t.getZIndex(),fa.IMAGE);i.setImageStyle($,e.addDeclutter(!1)),i.drawPoint(r,o)}var a=t.getText();if(a){var n=e.getBuilder(t.getZIndex(),fa.TEXT);n.setTextStyle(a,e.addDeclutter(!!$)),n.drawText(r,o)}}function ii(e,r,t,o){var $=t.getImage();if($){if($.getImageState()!=ea.LOADED)return;var i=e.getBuilder(t.getZIndex(),fa.IMAGE);i.setImageStyle($,e.addDeclutter(!1)),i.drawMultiPoint(r,o)}var a=t.getText();if(a){var n=e.getBuilder(t.getZIndex(),fa.TEXT);n.setTextStyle(a,e.addDeclutter(!!$)),n.drawText(r,o)}}function ji(e,r,t,o){var $=t.getFill(),i=t.getStroke();if($||i){var a=e.getBuilder(t.getZIndex(),fa.POLYGON);a.setFillStrokeStyle($,i),a.drawPolygon(r,o)}var n=t.getText();if(n){var l=e.getBuilder(t.getZIndex(),fa.TEXT);l.setTextStyle(n,e.addDeclutter(!1)),l.drawText(r,o)}}var ki=ed&&ed.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),df=function(e){function t(t){var r=e.call(this,t)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.animatingOrInteracting_,r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=bb(),r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r}return ki(t,e),t.prototype.useContainer=function(t,r,i){i<1&&(t=null),e.prototype.useContainer.call(this,t,r,i)},t.prototype.renderFrame=function(e,t){var r=e.pixelRatio,i=e.layerStatesArray[e.layerIndex];yf(this.pixelTransform,1/r,1/r),zf(this.inversePixelTransform,this.pixelTransform);var n=Bf(this.pixelTransform);this.useContainer(t,n,i.opacity);var a=this.context,o=a.canvas,s=this.replayGroup_;if(!s||s.isEmpty())return!this.containerReused&&o.width>0&&(o.width=0),this.container;var h=Math.round(e.size[0]*r),$=Math.round(e.size[1]*r);o.width!=h||o.height!=$?(o.width=h,o.height=$,o.style.transform!==n&&(o.style.transform=n)):this.containerReused||a.clearRect(0,0,h,$),this.preRender(a,e);var d=e.extent,p=e.viewState,u=p.center,H=p.resolution,l=p.projection,c=p.rotation,g=l.getExtent(),m=this.getLayer().getSource(),f=!1;if(i.extent){var v=cg(i.extent,l);(f=!Ma(v,e.extent)&&ma(v,e.extent))&&this.clipUnrotated(a,e,v)}var _=e.viewHints,y=!(_[kb.ANIMATING]||_[kb.INTERACTING]),z=this.getRenderTransform(u,H,c,r,h,$,0),x=this.getLayer().getDeclutter()?{}:null;if(s.execute(a,1,z,c,y,void 0,x),m.getWrapX()&&l.canWrapX()&&!Ma(g,d)){for(var R=d[0],I=Ea(g),w=0,E=void 0;R<g[0];){E=I*--w;var T=this.getRenderTransform(u,H,c,r,h,$,E);s.execute(a,1,T,c,y,void 0,x),R+=I}for(w=0,R=d[2];R>g[2];){E=I*++w;var C=this.getRenderTransform(u,H,c,r,h,$,E);s.execute(a,1,C,c,y,void 0,x),R-=I}}if(x){var F=e.viewHints,j=!(F[kb.ANIMATING]||F[kb.INTERACTING]);Qh(x,a,c,1,j,e.declutterItems)}f&&a.restore(),this.postRender(a,e);var G=i.opacity,S=this.container;return G!==parseFloat(S.style.opacity)&&(S.style.opacity=1===G?"":String(G)),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container},t.prototype.getFeatures=function(e){return new Promise(function(t,r){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];ha(this.pixelTransform,i);var n=this.renderedCenter_,a=this.renderedResolution_,o=this.renderedRotation_,s=this.renderedProjection_,h=this.renderedExtent_,$=this.getLayer(),d=[],p=i[0]/2,u=i[1]/2;d.push(this.getRenderTransform(n,a,o,.5,p,u,0).slice());var H=$.getSource(),l=s.getExtent();if(H.getWrapX()&&s.canWrapX()&&!Ma(l,h)){for(var c=h[0],g=Ea(l),m=0,f=void 0;c<l[0];)f=g*--m,d.push(this.getRenderTransform(n,a,o,.5,p,u,f).slice()),c+=g;for(m=0,c=h[2];c>l[2];)f=g*++m,d.push(this.getRenderTransform(n,a,o,.5,p,u,f).slice()),c-=g}this.hitDetectionImageData_=Rh(i,d,this.renderedFeatures_,$.getStyleFunction(),h,a,o)}t(Sh(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},t.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,n){if(this.replayGroup_){var a=t.viewState.resolution,o=t.viewState.rotation,s=this.getLayer(),h={};return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,function(e){var t=ia(e);if(!(t in h))return h[t]=!0,i(e,s)},s.getDeclutter()?n:null)}},t.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.prepareFrame=function(e){var t=this.getLayer(),r=t.getSource();if(!r)return!1;var i=e.viewHints[kb.ANIMATING],n=e.viewHints[kb.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(!this.dirty_&&!a&&i||!o&&n)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=e.extent,h=e.viewState,$=h.projection,d=h.resolution,p=e.pixelRatio,u=t.getRevision(),H=t.getRenderBuffer(),l=t.getRenderOrder();void 0===l&&(l=_h);var c=h.center.slice(),g=rc(s,H*d),m=[g.slice()],f=$.getExtent();if(r.getWrapX()&&$.canWrapX()&&!Ma(f,e.extent)){var v=Ea(f),_=Math.max(Ea(g)/2,v);g[0]=f[0]-_,g[2]=f[2]+_,_f(c,$);var y=Kf(m[0],$);y[0]<f[0]&&y[2]<f[2]?m.push([y[0]+v,y[1],y[2]+v,y[3]]):y[0]>f[0]&&y[2]>f[2]&&m.push([y[0]-v,y[1],y[2]-v,y[3]])}if(!this.dirty_&&this.renderedResolution_==d&&this.renderedRevision_==u&&this.renderedRenderOrder_==l&&Ma(this.renderedExtent_,g))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var z,x=new Ih(af(d,p),g,d,p,t.getDeclutter()),R=bg();if(R){for(var I=0,w=m.length;I<w;++I)r.loadFeatures(Ud(m[I],$),d,R);z=Jd(R,$)}else for(I=0,w=m.length;I<w;++I)r.loadFeatures(m[I],d,$);var E=ai(d,p),T=function(e){var r,i=e.getStyleFunction()||t.getStyleFunction();if(i&&(r=i(e,d)),r){var n=this.renderFeature(e,E,r,x,z);this.dirty_=this.dirty_||n}}.bind(this),C=Ud(g,$),F=r.getFeaturesInExtent(C);l&&F.sort(l);for(I=0,w=F.length;I<w;++I)T(F[I]);this.renderedFeatures_=F;var j=x.finish(),G=new Oh(g,d,p,r.getOverlaps(),j,t.getRenderBuffer());return this.renderedResolution_=d,this.renderedRevision_=u,this.renderedRenderOrder_=l,this.renderedExtent_=g,this.renderedCenter_=c,this.renderedProjection_=$,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},t.prototype.renderFeature=function(e,t,r,i,n){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var o=0,s=r.length;o<s;++o)a=bf(i,e,r[o],t,this.boundHandleStyleImageChange_,n)||a;else a=bf(i,e,r,t,this.boundHandleStyleImageChange_,n);return a},t}(Te);ed.default=df;var li=Yc&&Yc.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function a(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}}(),mi=function(e){function r(r){return e.call(this,r)||this}return li(r,e),r.prototype.createRenderer=function(){return new df(this)},r}(Le);Yc.default=mi;var fc={};var gc={};var lb={ADD:"add",REMOVE:"remove"};var ef=gc&&gc.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ff={LENGTH:"length"},Fb=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.element=r,o.index=n,o}return ef(e,t),e}(Ya);gc.CollectionEvent=Fb;var gf=function(t){function e(e,r){var n=t.call(this)||this,o=r||{};if(n.unique_=!!o.unique,n.array_=e||[],n.unique_)for(var i=0,s=n.array_.length;i<s;++i)n.assertUnique_(n.array_[i],i);return n.updateLength_(),n}return ef(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(ff.LENGTH)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Fb(lb.ADD,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Fb(lb.REMOVE,e,t)),e},e.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Fb(lb.REMOVE,n,t)),this.dispatchEvent(new Fb(lb.ADD,e,t))}else{for(var o=r;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(ff.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new qc(58)},e}(Ca);gc.default=gf;var hf=function(){function t(t){var $C6Up$$interop$default=wd(Db);this.rbush_=new $C6Up$$interop$default.d(t),this.items_={}}return t.prototype.insert=function(t,r){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:r};this.rbush_.insert(e),this.items_[ia(r)]=e},t.prototype.load=function(t,r){for(var e=new Array(r.length),i=0,n=r.length;i<n;i++){var o=t[i],p=r[i],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:p};e[i]=s,this.items_[ia(p)]=s}this.rbush_.load(e)},t.prototype.remove=function(t){var r=ia(t),e=this.items_[r];return delete this.items_[r],null!==this.rbush_.remove(e)},t.prototype.update=function(t,r){var e=this.items_[ia(r)],i=[e.minX,e.minY,e.maxX,e.maxY];Ed(i,t)||(this.remove(r),this.insert(t,r))},t.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},t.prototype.getInExtent=function(t){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(r).map(function(t){return t.value})},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,r){return this.forEach_(this.getInExtent(t),r)},t.prototype.forEach_=function(t,r){for(var e,i=0,n=t.length;i<n;i++)if(e=r(t[i]))return e;return e},t.prototype.isEmpty=function(){return qb(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var r=this.rbush_.toJSON();return Na(r.minX,r.minY,r.maxX,r.maxY,t)},t.prototype.concat=function(t){for(var r in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[r]=t.items_[r]},t}();var vd={};var ni=vd&&vd.__extends||function(){var t=function(r,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(r,o)};return function(r,o){function e(){this.constructor=r}t(r,o),r.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),jf=function(t){function r(r){var o=t.call(this)||this;return o.projection_=Mb(r.projection),o.attributions_=kf(r.attributions),o.attributionsCollapsible_=void 0===r.attributionsCollapsible||r.attributionsCollapsible,o.loading=!1,o.state_=void 0!==r.state?r.state:Xb.READY,o.wrapX_=void 0!==r.wrapX&&r.wrapX,o}return ni(r,t),r.prototype.getAttributions=function(){return this.attributions_},r.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},r.prototype.getProjection=function(){return this.projection_},r.prototype.getResolutions=function(){return ca()},r.prototype.getState=function(){return this.state_},r.prototype.getWrapX=function(){return this.wrapX_},r.prototype.getContextOptions=function(){},r.prototype.refresh=function(){this.changed()},r.prototype.setAttributions=function(t){this.attributions_=kf(t),this.changed()},r.prototype.setState=function(t){this.state_=t,this.changed()},r}(Ca);function kf(t){return t?Array.isArray(t)?function(r){return t}:"function"==typeof t?t:function(r){return[t]}:null}vd.default=jf;var Xa={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};function oi(t,e){return[[-1/0,-1/0,1/0,1/0]]}var Gb={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};var pi=!1;function qi(e,t,r,$){return function(o,a,s){var i=new XMLHttpRequest;i.open("GET","function"==typeof e?e(o,a,s):e,!0),t.getType()==Gb.ARRAY_BUFFER&&(i.responseType="arraybuffer"),i.withCredentials=pi,i.onload=function(e){if(!i.status||i.status>=200&&i.status<300){var a=t.getType(),n=void 0;a==Gb.JSON||a==Gb.TEXT?n=i.responseText:a==Gb.XML?(n=i.responseXML)||(n=new DOMParser().parseFromString(i.responseText,"application/xml")):a==Gb.ARRAY_BUFFER&&(n=i.response),n?r.call(this,t.readFeatures(n,{extent:o,featureProjection:s}),t.readProjection(n)):$.call(this)}else $.call(this)}.bind(this),i.onerror=function(){$.call(this)}.bind(this),i.send()}}function lf(e,t){return qi(e,t,function(e,t){"function"==typeof this.addFeatures&&this.addFeatures(e)},pb)}var mf=fc&&fc.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),mb=function(e){function t(t,r){var o=e.call(this,t)||this;return o.feature=r,o}return mf(t,e),t}(Ya);fc.VectorSourceEvent=mb;var ri=function(e){function t(t){var r=this,o=t||{};(r=e.call(this,{attributions:o.attributions,projection:void 0,state:Xb.READY,wrapX:void 0===o.wrapX||o.wrapX})||this).loader_=pb,r.format_=o.format,r.overlaps_=void 0===o.overlaps||o.overlaps,r.url_=o.url,void 0!==o.loader?r.loader_=o.loader:void 0!==r.url_&&(la(r.format_,7),r.loader_=lf(r.url_,r.format_)),r.strategy_=void 0!==o.strategy?o.strategy:oi;var i,n,s=void 0===o.useSpatialIndex||o.useSpatialIndex;return r.featuresRtree_=s?new hf:null,r.loadedExtentsRtree_=new hf,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(o.features)?n=o.features:o.features&&(n=(i=o.features).getArray()),s||void 0!==i||(i=new gf(n)),void 0!==n&&r.addFeaturesInternal(n),void 0!==i&&r.bindFeaturesCollection_(i),r}return mf(t,e),t.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},t.prototype.addFeatureInternal=function(e){var t=ia(e);if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var r=e.getGeometry();if(r){var o=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new mb(Xa.ADDFEATURE,e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)},t.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[ta(t,ka.CHANGE,this.handleFeatureChange_,this),ta(t,xd.PROPERTYCHANGE,this.handleFeatureChange_,this)]},t.prototype.addToIndex_=function(e,t){var r=!0,o=t.getId();return void 0!==o&&(o.toString()in this.idIndex_?r=!1:this.idIndex_[o.toString()]=t),r&&(la(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r},t.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},t.prototype.addFeaturesInternal=function(e){for(var t=[],r=[],o=[],i=0,n=e.length;i<n;i++){var s=e[i],a=ia(s);this.addToIndex_(a,s)&&r.push(s)}i=0;for(var u=r.length;i<u;i++){s=r[i],a=ia(s);this.setupChangeEvents_(a,s);var $=s.getGeometry();if($){var l=$.getExtent();t.push(l),o.push(s)}else this.nullGeometryFeatures_[a]=s}this.featuresRtree_&&this.featuresRtree_.load(t,o);i=0;for(var p=r.length;i<p;i++)this.dispatchEvent(new mb(Xa.ADDFEATURE,r[i]))},t.prototype.bindFeaturesCollection_=function(e){var t=!1;this.addEventListener(Xa.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(Xa.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(lb.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)}.bind(this)),e.addEventListener(lb.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)}.bind(this)),this.featuresCollection_=e},t.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(ua)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var o=new mb(Xa.CLEAR);this.dispatchEvent(o),this.changed()},t.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},t.prototype.forEachFeatureAtCoordinateDirect=function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})},t.prototype.forEachFeatureInExtent=function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},t.prototype.forEachFeatureIntersectingExtent=function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var o=t(r);if(o)return o}})},t.prototype.getFeaturesCollection=function(){return this.featuresCollection_},t.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),qb(this.nullGeometryFeatures_)||oa(e,yd(this.nullGeometryFeatures_))),e},t.prototype.getFeaturesAtCoordinate=function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t},t.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray():[]},t.prototype.getClosestFeatureToCoordinate=function(e,t){var r=e[0],o=e[1],i=null,n=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],u=t||of;return this.featuresRtree_.forEachInExtent(a,function(e){if(u(e)){var t=e.getGeometry(),$=s;if((s=t.closestPointXY(r,o,n,s))<$){i=e;var l=Math.sqrt(s);a[0]=r-l,a[1]=o-l,a[2]=r+l,a[3]=o+l}}}),i},t.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},t.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null},t.prototype.getFeatureByUid=function(e){var t=this.uidIndex_[e];return void 0!==t?t:null},t.prototype.getFormat=function(){return this.format_},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.getUrl=function(){return this.url_},t.prototype.handleFeatureChange_=function(e){var t=e.target,r=ia(t),o=t.getGeometry();if(o){var i=o.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,t)):this.featuresRtree_&&this.featuresRtree_.update(i,t)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);var n=t.getId();if(void 0!==n){var s=n.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new mb(Xa.CHANGEFEATURE,t))},t.prototype.hasFeature=function(e){var t=e.getId();return void 0!==t?t in this.idIndex_:ia(e)in this.uidIndex_},t.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&qb(this.nullGeometryFeatures_)},t.prototype.loadFeatures=function(e,t,r){var o=this.loadedExtentsRtree_,i=this.strategy_(e,t);this.loading=!1;for(var n=function(e,n){var a=i[e];o.forEachInExtent(a,function(e){return Ma(e.extent,a)})||(s.loader_.call(s,a,t,r),o.insert(a,{extent:a.slice()}),s.loading=s.loader_!==pb)},s=this,a=0,u=i.length;a<u;++a)n(a)},t.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),e.prototype.refresh.call(this)},t.prototype.removeLoadedExtent=function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if(Ed(r.extent,e))return t=r,!0}),t&&r.remove(t)},t.prototype.removeFeature=function(e){var t=ia(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e),this.changed()},t.prototype.removeFeatureInternal=function(e){var t=ia(e);this.featureChangeKeys_[t].forEach(ua),delete this.featureChangeKeys_[t];var r=e.getId();void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new mb(Xa.REMOVEFEATURE,e))},t.prototype.removeFromIdIndex_=function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t},t.prototype.setLoader=function(e){this.loader_=e},t.prototype.setUrl=function(e){la(this.format_,7),this.setLoader(lf(e,this.format_))},t}(jf);fc.default=ri;if(typeof exports==="object"&&typeof module!=="undefined"){module.exports={}}else if(typeof define==="function"&&define.amd){define(function(){return{}})}({}).__esModule=true;return{"ff1o":{},"C6Up":Db};});